{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/chat.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ChatWidgetComponent_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_button_0_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleWidget());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 3);\n    i0.ɵɵelement(2, \"path\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"data-theme\", ctx_r1.theme);\n  }\n}\nfunction ChatWidgetComponent_div_1__svg_svg_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12);\n    i0.ɵɵelement(1, \"path\", 25);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatWidgetComponent_div_1__svg_svg_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12);\n    i0.ɵɵelement(1, \"circle\", 26)(2, \"line\", 27)(3, \"line\", 28)(4, \"line\", 29)(5, \"line\", 30)(6, \"line\", 31)(7, \"line\", 32)(8, \"line\", 33)(9, \"line\", 34);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatWidgetComponent_div_1_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 36);\n    i0.ɵɵelement(2, \"path\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"Welcome to ChatQ Assist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Ask us anything about our products and services.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"href\", source_r4.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(source_r4.title);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(source_r4.title);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"span\", 44);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template, 2, 2, \"a\", 45)(4, ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template, 2, 1, \"span\", 46);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(source_r4.type);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", source_r4.url);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !source_r4.url);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"p\", 41);\n    i0.ɵɵtext(2, \"Sources:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_div_3_Template, 5, 3, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", message_r5.sources);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"div\", 38);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_Template, 4, 1, \"div\", 39);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r5 = ctx.$implicit;\n    i0.ɵɵclassProp(\"user\", message_r5.role === \"user\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", message_r5.content, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r5.sources && message_r5.sources.length > 0);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"div\", 49);\n    i0.ɵɵelement(2, \"span\")(3, \"span\")(4, \"span\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatWidgetComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7)(3, \"h3\");\n    i0.ɵɵtext(4, \"ChatQ Assist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"How can we help you?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleTheme());\n    });\n    i0.ɵɵtemplate(9, ChatWidgetComponent_div_1__svg_svg_9_Template, 2, 0, \"svg\", 10)(10, ChatWidgetComponent_div_1__svg_svg_10_Template, 10, 0, \"svg\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleWidget());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(12, \"svg\", 12);\n    i0.ɵɵelement(13, \"line\", 13)(14, \"line\", 14);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(15, \"div\", 15);\n    i0.ɵɵtemplate(16, ChatWidgetComponent_div_1_div_16_Template, 7, 0, \"div\", 16)(17, ChatWidgetComponent_div_1_div_17_Template, 4, 4, \"div\", 17)(18, ChatWidgetComponent_div_1_div_18_Template, 5, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 19)(20, \"textarea\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChatWidgetComponent_div_1_Template_textarea_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.currentMessage, $event) || (ctx_r1.currentMessage = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"keypress\", function ChatWidgetComponent_div_1_Template_textarea_keypress_20_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleKeyPress($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.sendMessage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(22, \"svg\", 12);\n    i0.ɵɵelement(23, \"line\", 22)(24, \"polygon\", 23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(25, \"div\", 24)(26, \"small\");\n    i0.ɵɵtext(27, \"Your privacy matters. We process data according to GDPR.\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"data-theme\", ctx_r1.theme);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.theme === \"light\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.theme === \"dark\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.messages.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.messages);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.currentMessage);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.currentMessage.trim() || ctx_r1.isLoading);\n  }\n}\nexport class ChatWidgetComponent {\n  constructor(chatService) {\n    this.chatService = chatService;\n    this.isOpen = false;\n    this.messages = [];\n    this.currentMessage = '';\n    this.sessionId = null;\n    this.isLoading = false;\n    this.theme = 'light';\n  }\n  ngOnInit() {\n    // Check for saved session\n    this.sessionId = localStorage.getItem('chatq-session-id');\n    // Load conversation history if session exists\n    if (this.sessionId) {\n      this.loadConversationHistory();\n    }\n    // Check system theme preference\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      this.theme = 'dark';\n    }\n  }\n  loadConversationHistory() {\n    if (!this.sessionId) return;\n    this.chatService.getHistory(this.sessionId).subscribe({\n      next: history => {\n        console.log('Loaded conversation history:', history);\n        this.messages = history.map(msg => ({\n          role: msg.role === 'USER' ? 'user' : 'assistant',\n          content: msg.content,\n          sources: [],\n          id: msg.id,\n          feedbackGiven: null\n        }));\n      },\n      error: error => {\n        console.error('Failed to load conversation history:', error);\n        // Clear invalid session\n        localStorage.removeItem('chatq-session-id');\n        this.sessionId = null;\n      }\n    });\n  }\n  toggleWidget() {\n    this.isOpen = !this.isOpen;\n  }\n  toggleTheme() {\n    this.theme = this.theme === 'light' ? 'dark' : 'light';\n  }\n  sendMessage() {\n    if (!this.currentMessage.trim() || this.isLoading) {\n      return;\n    }\n    const userMessage = {\n      role: 'user',\n      content: this.currentMessage\n    };\n    this.messages.push(userMessage);\n    const request = {\n      question: this.currentMessage,\n      sessionId: this.sessionId || undefined\n    };\n    this.currentMessage = '';\n    this.isLoading = true;\n    // Add placeholder for assistant response (will be filled with streaming tokens)\n    const assistantMessage = {\n      role: 'assistant',\n      content: '',\n      sources: []\n    };\n    this.messages.push(assistantMessage);\n    // Use streaming API\n    this.chatService.sendMessageStreaming(request).subscribe({\n      next: streamEvent => {\n        if (streamEvent.type === 'token' && streamEvent.token) {\n          // Append token exactly as received from backend\n          console.log('Received token:', JSON.stringify(streamEvent.token));\n          assistantMessage.content += streamEvent.token;\n        } else if (streamEvent.type === 'metadata' && streamEvent.metadata) {\n          // Update session and metadata\n          this.sessionId = streamEvent.metadata.sessionId;\n          localStorage.setItem('chatq-session-id', streamEvent.metadata.sessionId);\n          if (streamEvent.metadata.sources) {\n            assistantMessage.sources = streamEvent.metadata.sources;\n          }\n          if (streamEvent.metadata.handoffTriggered) {\n            this.messages.push({\n              role: 'assistant',\n              content: 'Ich verbinde Sie mit einem Mitarbeiter.'\n            });\n          }\n        } else if (streamEvent.type === 'messageId' && streamEvent.messageId) {\n          // Store message ID for feedback\n          assistantMessage.id = streamEvent.messageId;\n          assistantMessage.feedbackGiven = null;\n        } else if (streamEvent.type === 'complete') {\n          this.isLoading = false;\n        } else if (streamEvent.type === 'error') {\n          console.error('Streaming error:', streamEvent.error);\n          assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n          this.isLoading = false;\n        }\n      },\n      error: error => {\n        console.error('Chat error:', error);\n        assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n        this.isLoading = false;\n      },\n      complete: () => {\n        this.isLoading = false;\n      }\n    });\n  }\n  handleKeyPress(event) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n  giveFeedback(message, feedbackType) {\n    if (!message.id) {\n      console.warn('Cannot give feedback: message has no ID');\n      return;\n    }\n    // Prevent duplicate feedback\n    if (message.feedbackGiven) {\n      console.log('Feedback already given for this message');\n      return;\n    }\n    this.chatService.submitFeedback({\n      messageId: message.id,\n      feedbackType: feedbackType\n    }).subscribe({\n      next: () => {\n        message.feedbackGiven = feedbackType;\n        console.log('Feedback submitted successfully:', feedbackType);\n      },\n      error: error => {\n        console.error('Failed to submit feedback:', error);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function ChatWidgetComponent_Factory(t) {\n      return new (t || ChatWidgetComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatWidgetComponent,\n      selectors: [[\"app-chat-widget\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 2,\n      vars: 2,\n      consts: [[\"class\", \"chat-button\", \"aria-label\", \"Open chat\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"chat-panel\", 4, \"ngIf\"], [\"aria-label\", \"Open chat\", 1, \"chat-button\", 3, \"click\"], [\"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"d\", \"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"], [1, \"chat-panel\"], [1, \"chat-header\"], [1, \"header-content\"], [1, \"header-actions\"], [\"aria-label\", \"Toggle theme\", 1, \"icon-button\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", 4, \"ngIf\"], [\"aria-label\", \"Close chat\", 1, \"icon-button\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [1, \"chat-messages\"], [\"class\", \"welcome-message\", 4, \"ngIf\"], [\"class\", \"message\", 3, \"user\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"message typing\", 4, \"ngIf\"], [1, \"chat-input\"], [\"placeholder\", \"Type your message...\", \"rows\", \"1\", 3, \"ngModelChange\", \"keypress\", \"ngModel\", \"disabled\"], [\"aria-label\", \"Send message\", 3, \"click\", \"disabled\"], [\"x1\", \"22\", \"y1\", \"2\", \"x2\", \"11\", \"y2\", \"13\"], [\"points\", \"22 2 15 22 11 13 2 9 22 2\"], [1, \"privacy-notice\"], [\"d\", \"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"5\"], [\"x1\", \"12\", \"y1\", \"1\", \"x2\", \"12\", \"y2\", \"3\"], [\"x1\", \"12\", \"y1\", \"21\", \"x2\", \"12\", \"y2\", \"23\"], [\"x1\", \"4.22\", \"y1\", \"4.22\", \"x2\", \"5.64\", \"y2\", \"5.64\"], [\"x1\", \"18.36\", \"y1\", \"18.36\", \"x2\", \"19.78\", \"y2\", \"19.78\"], [\"x1\", \"1\", \"y1\", \"12\", \"x2\", \"3\", \"y2\", \"12\"], [\"x1\", \"21\", \"y1\", \"12\", \"x2\", \"23\", \"y2\", \"12\"], [\"x1\", \"4.22\", \"y1\", \"19.78\", \"x2\", \"5.64\", \"y2\", \"18.36\"], [\"x1\", \"18.36\", \"y1\", \"5.64\", \"x2\", \"19.78\", \"y2\", \"4.22\"], [1, \"welcome-message\"], [\"width\", \"48\", \"height\", \"48\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [1, \"message\"], [1, \"message-content\"], [\"class\", \"message-sources\", 4, \"ngIf\"], [1, \"message-sources\"], [1, \"sources-label\"], [\"class\", \"source-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"source-item\"], [1, \"source-type\"], [\"target\", \"_blank\", 3, \"href\", 4, \"ngIf\"], [4, \"ngIf\"], [\"target\", \"_blank\", 3, \"href\"], [1, \"message\", \"typing\"], [1, \"typing-indicator\"]],\n      template: function ChatWidgetComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, ChatWidgetComponent_button_0_Template, 3, 1, \"button\", 0)(1, ChatWidgetComponent_div_1_Template, 28, 9, \"div\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", !ctx.isOpen);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n      styles: [\"\\n\\n.chat-button[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 24px;\\n  right: 24px;\\n  width: 60px;\\n  height: 60px;\\n  border-radius: 50%;\\n  border: none;\\n  cursor: pointer;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n  transition: all 0.3s ease;\\n  z-index: 1000;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.chat-button[data-theme=\\\"light\\\"][_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n}\\n\\n.chat-button[data-theme=\\\"dark\\\"][_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #434343 0%, #000000 100%);\\n  color: white;\\n}\\n\\n.chat-button[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.1);\\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\\n}\\n\\n\\n\\n.chat-panel[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 24px;\\n  right: 24px;\\n  width: 380px;\\n  height: 600px;\\n  border-radius: 16px;\\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\\n  display: flex;\\n  flex-direction: column;\\n  z-index: 1000;\\n  overflow: hidden;\\n  animation: _ngcontent-%COMP%_slideIn 0.3s ease;\\n}\\n\\n.chat-panel[data-theme=\\\"light\\\"][_ngcontent-%COMP%] {\\n  background: white;\\n  color: #333;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%] {\\n  background: #1a1a1a;\\n  color: #f0f0f0;\\n}\\n\\n@keyframes _ngcontent-%COMP%_slideIn {\\n  from {\\n    transform: translateY(20px);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: translateY(0);\\n    opacity: 1;\\n  }\\n}\\n\\n\\n\\n.chat-header[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #434343 0%, #000000 100%);\\n}\\n\\n.header-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  margin: 0 0 4px 0;\\n  font-weight: 600;\\n}\\n\\n.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 13px;\\n  margin: 0;\\n  opacity: 0.9;\\n}\\n\\n.header-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.icon-button[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.2);\\n  border: none;\\n  border-radius: 8px;\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n  color: white;\\n  transition: background 0.2s;\\n}\\n\\n.icon-button[_ngcontent-%COMP%]:hover {\\n  background: rgba(255, 255, 255, 0.3);\\n}\\n\\n\\n\\n.chat-messages[_ngcontent-%COMP%] {\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n}\\n\\n.chat-panel[data-theme=\\\"light\\\"][_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%] {\\n  background: #f5f5f5;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%] {\\n  background: #0f0f0f;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #999;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\\n  margin-bottom: 16px;\\n  opacity: 0.5;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  margin: 0 0 8px 0;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  margin: 0;\\n}\\n\\n.message[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.message.user[_ngcontent-%COMP%] {\\n  align-items: flex-end;\\n}\\n\\n.message-content[_ngcontent-%COMP%] {\\n  max-width: 80%;\\n  padding: 12px 16px;\\n  border-radius: 12px;\\n  font-size: 14px;\\n  line-height: 1.5;\\n  word-wrap: break-word;\\n  overflow-wrap: break-word;\\n  white-space: pre-wrap;\\n}\\n\\n.message[_ngcontent-%COMP%]:not(.user)   .message-content[_ngcontent-%COMP%] {\\n  background: white;\\n  color: #333;\\n  border-bottom-left-radius: 4px;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:not(.user)   .message-content[_ngcontent-%COMP%] {\\n  background: #2a2a2a;\\n  color: #f0f0f0;\\n}\\n\\n.message.user[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n  border-bottom-right-radius: 4px;\\n}\\n\\n.message-sources[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  padding: 8px;\\n  background: rgba(0, 0, 0, 0.03);\\n  border-radius: 8px;\\n  max-width: 80%;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .message-sources[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.05);\\n}\\n\\n.sources-label[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  margin: 0 0 4px 0;\\n}\\n\\n.source-item[_ngcontent-%COMP%] {\\n  margin: 4px 0;\\n  display: flex;\\n  gap: 8px;\\n  align-items: center;\\n}\\n\\n.source-type[_ngcontent-%COMP%] {\\n  font-size: 10px;\\n  padding: 2px 6px;\\n  background: #667eea;\\n  color: white;\\n  border-radius: 4px;\\n  text-transform: uppercase;\\n  font-weight: 600;\\n}\\n\\n\\n\\n.typing-indicator[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 4px;\\n  padding: 12px 16px;\\n  background: white;\\n  border-radius: 12px;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%] {\\n  background: #2a2a2a;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  width: 8px;\\n  height: 8px;\\n  background: #999;\\n  border-radius: 50%;\\n  animation: _ngcontent-%COMP%_typing 1.4s infinite;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes _ngcontent-%COMP%_typing {\\n  0%, 60%, 100% {\\n    opacity: 0.3;\\n  }\\n  30% {\\n    opacity: 1;\\n  }\\n}\\n\\n\\n\\n.chat-input[_ngcontent-%COMP%] {\\n  padding: 16px;\\n  display: flex;\\n  gap: 8px;\\n  align-items: flex-end;\\n  border-top: 1px solid #e0e0e0;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%] {\\n  border-top-color: #333;\\n  background: #1a1a1a;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  flex: 1;\\n  padding: 12px;\\n  border: 1px solid #e0e0e0;\\n  border-radius: 8px;\\n  font-size: 14px;\\n  font-family: inherit;\\n  resize: none;\\n  max-height: 100px;\\n}\\n\\n.chat-panel[data-theme=\\\"light\\\"][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  background: white;\\n  color: #333;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  background: #2a2a2a;\\n  color: #f0f0f0;\\n  border-color: #444;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border-color: #667eea;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 40px;\\n  height: 40px;\\n  border-radius: 8px;\\n  border: none;\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: opacity 0.2s;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover {\\n  opacity: 0.9;\\n}\\n\\n\\n\\n.privacy-notice[_ngcontent-%COMP%] {\\n  padding: 12px 16px;\\n  text-align: center;\\n  border-top: 1px solid #e0e0e0;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .privacy-notice[_ngcontent-%COMP%] {\\n  border-top-color: #333;\\n}\\n\\n.privacy-notice[_ngcontent-%COMP%]   small[_ngcontent-%COMP%] {\\n  font-size: 11px;\\n  color: #999;\\n}\\n\\n\\n\\n@media (max-width: 480px) {\\n  .chat-panel[_ngcontent-%COMP%] {\\n    width: 100%;\\n    height: 100%;\\n    bottom: 0;\\n    right: 0;\\n    border-radius: 0;\\n  }\\n\\n  .chat-button[_ngcontent-%COMP%] {\\n    bottom: 16px;\\n    right: 16px;\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jaGF0LXdpZGdldC9jaGF0LXdpZGdldC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUNoQjtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osV0FBVztFQUNYLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixlQUFlO0VBQ2YsMENBQTBDO0VBQzFDLHlCQUF5QjtFQUN6QixhQUFhO0VBQ2IsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSw2REFBNkQ7RUFDN0QsWUFBWTtBQUNkOztBQUVBO0VBQ0UsNkRBQTZEO0VBQzdELFlBQVk7QUFDZDs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQix5Q0FBeUM7QUFDM0M7O0FBRUEsZUFBZTtBQUNmO0VBQ0UsZUFBZTtFQUNmLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsMENBQTBDO0VBQzFDLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQiw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsV0FBVztBQUNiOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGNBQWM7QUFDaEI7O0FBRUE7RUFDRTtJQUNFLDJCQUEyQjtJQUMzQixVQUFVO0VBQ1o7RUFDQTtJQUNFLHdCQUF3QjtJQUN4QixVQUFVO0VBQ1o7QUFDRjs7QUFFQSxXQUFXO0FBQ1g7RUFDRSxhQUFhO0VBQ2IsNkRBQTZEO0VBQzdELFlBQVk7RUFDWixhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLDZEQUE2RDtBQUMvRDs7QUFFQTtFQUNFLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFNBQVM7RUFDVCxZQUFZ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O0VBQ25CLHVCQUF1QjtFQUN2Qix3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBLG1CQUFtQjtBQUNuQjtFQUNFLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7QUFDYjs7QUFFQSxzQkFBc0I7QUFDdEI7RUFDRTtJQUNFLFdBQVc7SUFDWCxZQUFZO0lBQ1osU0FBUztJQUNULFFBQVE7SUFDUixnQkFBZ0I7RUFDbEI7O0VBRUE7SUFDRSxZQUFZO0lBQ1osV0FBVztFQUNiO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDaGF0IEJ1dHRvbiAqL1xuLmNoYXQtYnV0dG9uIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDI0cHg7XG4gIHJpZ2h0OiAyNHB4O1xuICB3aWR0aDogNjBweDtcbiAgaGVpZ2h0OiA2MHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJvcmRlcjogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uY2hhdC1idXR0b25bZGF0YS10aGVtZT1cImxpZ2h0XCJdIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uY2hhdC1idXR0b25bZGF0YS10aGVtZT1cImRhcmtcIl0ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNDM0MzQzIDAlLCAjMDAwMDAwIDEwMCUpO1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5jaGF0LWJ1dHRvbjpob3ZlciB7XG4gIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgYm94LXNoYWRvdzogMCA2cHggMTZweCByZ2JhKDAsIDAsIDAsIDAuMik7XG59XG5cbi8qIENoYXQgUGFuZWwgKi9cbi5jaGF0LXBhbmVsIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDI0cHg7XG4gIHJpZ2h0OiAyNHB4O1xuICB3aWR0aDogMzgwcHg7XG4gIGhlaWdodDogNjAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gIGJveC1zaGFkb3c6IDAgOHB4IDI0cHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgei1pbmRleDogMTAwMDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgYW5pbWF0aW9uOiBzbGlkZUluIDAuM3MgZWFzZTtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImxpZ2h0XCJdIHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGNvbG9yOiAjMzMzO1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSB7XG4gIGJhY2tncm91bmQ6ICMxYTFhMWE7XG4gIGNvbG9yOiAjZjBmMGYwO1xufVxuXG5Aa2V5ZnJhbWVzIHNsaWRlSW4ge1xuICBmcm9tIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjBweCk7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICB0byB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbn1cblxuLyogSGVhZGVyICovXG4uY2hhdC1oZWFkZXIge1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpO1xuICBjb2xvcjogd2hpdGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLmNoYXQtaGVhZGVyIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzQzNDM0MyAwJSwgIzAwMDAwMCAxMDAlKTtcbn1cblxuLmhlYWRlci1jb250ZW50IGgzIHtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBtYXJnaW46IDAgMCA0cHggMDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLmhlYWRlci1jb250ZW50IHAge1xuICBmb250LXNpemU6IDEzcHg7XG4gIG1hcmdpbjogMDtcbiAgb3BhY2l0eTogMC45O1xufVxuXG4uaGVhZGVyLWFjdGlvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDhweDtcbn1cblxuLmljb24tYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgd2lkdGg6IDMycHg7XG4gIGhlaWdodDogMzJweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgY29sb3I6IHdoaXRlO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XG59XG5cbi5pY29uLWJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTtcbn1cblxuLyogTWVzc2FnZXMgKi9cbi5jaGF0LW1lc3NhZ2VzIHtcbiAgZmxleDogMTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgcGFkZGluZzogMjBweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiAxNnB4O1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwibGlnaHRcIl0gLmNoYXQtbWVzc2FnZXMge1xuICBiYWNrZ3JvdW5kOiAjZjVmNWY1O1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSAuY2hhdC1tZXNzYWdlcyB7XG4gIGJhY2tncm91bmQ6ICMwZjBmMGY7XG59XG5cbi53ZWxjb21lLW1lc3NhZ2Uge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDQwcHggMjBweDtcbiAgY29sb3I6ICM5OTk7XG59XG5cbi53ZWxjb21lLW1lc3NhZ2Ugc3ZnIHtcbiAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgb3BhY2l0eTogMC41O1xufVxuXG4ud2VsY29tZS1tZXNzYWdlIGg0IHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBtYXJnaW46IDAgMCA4cHggMDtcbn1cblxuLndlbGNvbWUtbWVzc2FnZSBwIHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBtYXJnaW46IDA7XG59XG5cbi5tZXNzYWdlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiA4cHg7XG59XG5cbi5tZXNzYWdlLnVzZXIge1xuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG59XG5cbi5tZXNzYWdlLWNvbnRlbnQge1xuICBtYXgtd2lkdGg6IDgwJTtcbiAgcGFkZGluZzogMTJweCAxNnB4O1xuICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxLjU7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xufVxuXG4ubWVzc2FnZTpub3QoLnVzZXIpIC5tZXNzYWdlLWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgY29sb3I6ICMzMzM7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLm1lc3NhZ2U6bm90KC51c2VyKSAubWVzc2FnZS1jb250ZW50IHtcbiAgYmFja2dyb3VuZDogIzJhMmEyYTtcbiAgY29sb3I6ICNmMGYwZjA7XG59XG5cbi5tZXNzYWdlLnVzZXIgLm1lc3NhZ2UtY29udGVudCB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDtcbn1cblxuLm1lc3NhZ2Utc291cmNlcyB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgcGFkZGluZzogOHB4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDMpO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIG1heC13aWR0aDogODAlO1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSAubWVzc2FnZS1zb3VyY2VzIHtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTtcbn1cblxuLnNvdXJjZXMtbGFiZWwge1xuICBmb250LXdlaWdodDogNjAwO1xuICBtYXJnaW46IDAgMCA0cHggMDtcbn1cblxuLnNvdXJjZS1pdGVtIHtcbiAgbWFyZ2luOiA0cHggMDtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5zb3VyY2UtdHlwZSB7XG4gIGZvbnQtc2l6ZTogMTBweDtcbiAgcGFkZGluZzogMnB4IDZweDtcbiAgYmFja2dyb3VuZDogIzY2N2VlYTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5cbi8qIFR5cGluZyBJbmRpY2F0b3IgKi9cbi50eXBpbmctaW5kaWNhdG9yIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA0cHg7XG4gIHBhZGRpbmc6IDEycHggMTZweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLnR5cGluZy1pbmRpY2F0b3Ige1xuICBiYWNrZ3JvdW5kOiAjMmEyYTJhO1xufVxuXG4udHlwaW5nLWluZGljYXRvciBzcGFuIHtcbiAgd2lkdGg6IDhweDtcbiAgaGVpZ2h0OiA4cHg7XG4gIGJhY2tncm91bmQ6ICM5OTk7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgYW5pbWF0aW9uOiB0eXBpbmcgMS40cyBpbmZpbml0ZTtcbn1cblxuLnR5cGluZy1pbmRpY2F0b3Igc3BhbjpudGgtY2hpbGQoMikge1xuICBhbmltYXRpb24tZGVsYXk6IDAuMnM7XG59XG5cbi50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDMpIHtcbiAgYW5pbWF0aW9uLWRlbGF5OiAwLjRzO1xufVxuXG5Aa2V5ZnJhbWVzIHR5cGluZyB7XG4gIDAlLCA2MCUsIDEwMCUge1xuICAgIG9wYWNpdHk6IDAuMztcbiAgfVxuICAzMCUge1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbn1cblxuLyogSW5wdXQgKi9cbi5jaGF0LWlucHV0IHtcbiAgcGFkZGluZzogMTZweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG4gIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGUwZTA7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJkYXJrXCJdIC5jaGF0LWlucHV0IHtcbiAgYm9yZGVyLXRvcC1jb2xvcjogIzMzMztcbiAgYmFja2dyb3VuZDogIzFhMWExYTtcbn1cblxuLmNoYXQtaW5wdXQgdGV4dGFyZWEge1xuICBmbGV4OiAxO1xuICBwYWRkaW5nOiAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gIHJlc2l6ZTogbm9uZTtcbiAgbWF4LWhlaWdodDogMTAwcHg7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJsaWdodFwiXSAuY2hhdC1pbnB1dCB0ZXh0YXJlYSB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBjb2xvcjogIzMzMztcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLmNoYXQtaW5wdXQgdGV4dGFyZWEge1xuICBiYWNrZ3JvdW5kOiAjMmEyYTJhO1xuICBjb2xvcjogI2YwZjBmMDtcbiAgYm9yZGVyLWNvbG9yOiAjNDQ0O1xufVxuXG4uY2hhdC1pbnB1dCB0ZXh0YXJlYTpmb2N1cyB7XG4gIG91dGxpbmU6IG5vbmU7XG4gIGJvcmRlci1jb2xvcjogIzY2N2VlYTtcbn1cblxuLmNoYXQtaW5wdXQgYnV0dG9uIHtcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3JkZXI6IG5vbmU7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzO1xufVxuXG4uY2hhdC1pbnB1dCBidXR0b246ZGlzYWJsZWQge1xuICBvcGFjaXR5OiAwLjU7XG4gIGN1cnNvcjogbm90LWFsbG93ZWQ7XG59XG5cbi5jaGF0LWlucHV0IGJ1dHRvbjpub3QoOmRpc2FibGVkKTpob3ZlciB7XG4gIG9wYWNpdHk6IDAuOTtcbn1cblxuLyogUHJpdmFjeSBOb3RpY2UgKi9cbi5wcml2YWN5LW5vdGljZSB7XG4gIHBhZGRpbmc6IDEycHggMTZweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBib3JkZXItdG9wOiAxcHggc29saWQgI2UwZTBlMDtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLnByaXZhY3ktbm90aWNlIHtcbiAgYm9yZGVyLXRvcC1jb2xvcjogIzMzMztcbn1cblxuLnByaXZhY3ktbm90aWNlIHNtYWxsIHtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBjb2xvcjogIzk5OTtcbn1cblxuLyogTW9iaWxlIFJlc3BvbnNpdmUgKi9cbkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAuY2hhdC1wYW5lbCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvdHRvbTogMDtcbiAgICByaWdodDogMDtcbiAgICBib3JkZXItcmFkaXVzOiAwO1xuICB9XG5cbiAgLmNoYXQtYnV0dG9uIHtcbiAgICBib3R0b206IDE2cHg7XG4gICAgcmlnaHQ6IDE2cHg7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵlistener","ChatWidgetComponent_button_0_Template_button_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","toggleWidget","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵproperty","source_r4","url","ɵɵsanitizeUrl","ɵɵadvance","ɵɵtextInterpolate","title","ɵɵtemplate","ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template","ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template","type","ChatWidgetComponent_div_1_div_17_div_3_div_3_Template","message_r5","sources","ChatWidgetComponent_div_1_div_17_div_3_Template","ɵɵclassProp","role","ɵɵtextInterpolate1","content","length","ChatWidgetComponent_div_1_Template_button_click_8_listener","_r3","toggleTheme","ChatWidgetComponent_div_1__svg_svg_9_Template","ChatWidgetComponent_div_1__svg_svg_10_Template","ChatWidgetComponent_div_1_Template_button_click_11_listener","ChatWidgetComponent_div_1_div_16_Template","ChatWidgetComponent_div_1_div_17_Template","ChatWidgetComponent_div_1_div_18_Template","ɵɵtwoWayListener","ChatWidgetComponent_div_1_Template_textarea_ngModelChange_20_listener","$event","ɵɵtwoWayBindingSet","currentMessage","ChatWidgetComponent_div_1_Template_textarea_keypress_20_listener","handleKeyPress","ChatWidgetComponent_div_1_Template_button_click_21_listener","sendMessage","theme","messages","isLoading","ɵɵtwoWayProperty","trim","ChatWidgetComponent","constructor","chatService","isOpen","sessionId","ngOnInit","localStorage","getItem","loadConversationHistory","window","matchMedia","matches","getHistory","subscribe","next","history","console","log","map","msg","id","feedbackGiven","error","removeItem","userMessage","push","request","question","undefined","assistantMessage","sendMessageStreaming","streamEvent","token","JSON","stringify","metadata","setItem","handoffTriggered","messageId","complete","event","key","shiftKey","preventDefault","giveFeedback","message","feedbackType","warn","submitFeedback","ɵɵdirectiveInject","i1","ChatService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ChatWidgetComponent_Template","rf","ctx","ChatWidgetComponent_button_0_Template","ChatWidgetComponent_div_1_Template","i2","NgForOf","NgIf","i3","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"sources":["C:\\Users\\bened\\IdeaProjects\\ChatQ-Assist\\chatq-assist-frontend\\src\\app\\components\\chat-widget\\chat-widget.component.ts","C:\\Users\\bened\\IdeaProjects\\ChatQ-Assist\\chatq-assist-frontend\\src\\app\\components\\chat-widget\\chat-widget.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ChatService, ChatRequest, ChatResponse } from '../../services/chat.service';\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  sources?: any[];\n  id?: number; // Message ID for feedback\n  feedbackGiven?: 'POSITIVE' | 'NEGATIVE' | null;\n}\n\n@Component({\n  selector: 'app-chat-widget',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './chat-widget.component.html',\n  styleUrls: ['./chat-widget.component.css']\n})\nexport class ChatWidgetComponent implements OnInit {\n  isOpen = false;\n  messages: Message[] = [];\n  currentMessage = '';\n  sessionId: string | null = null;\n  isLoading = false;\n  theme: 'light' | 'dark' = 'light';\n\n  constructor(private chatService: ChatService) {}\n\n  ngOnInit() {\n    // Check for saved session\n    this.sessionId = localStorage.getItem('chatq-session-id');\n\n    // Load conversation history if session exists\n    if (this.sessionId) {\n      this.loadConversationHistory();\n    }\n\n    // Check system theme preference\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      this.theme = 'dark';\n    }\n  }\n\n  loadConversationHistory() {\n    if (!this.sessionId) return;\n\n    this.chatService.getHistory(this.sessionId).subscribe({\n      next: (history) => {\n        console.log('Loaded conversation history:', history);\n        this.messages = history.map(msg => ({\n          role: msg.role === 'USER' ? 'user' : 'assistant',\n          content: msg.content,\n          sources: [],\n          id: msg.id,\n          feedbackGiven: null\n        }));\n      },\n      error: (error) => {\n        console.error('Failed to load conversation history:', error);\n        // Clear invalid session\n        localStorage.removeItem('chatq-session-id');\n        this.sessionId = null;\n      }\n    });\n  }\n\n  toggleWidget() {\n    this.isOpen = !this.isOpen;\n  }\n\n  toggleTheme() {\n    this.theme = this.theme === 'light' ? 'dark' : 'light';\n  }\n\n  sendMessage() {\n    if (!this.currentMessage.trim() || this.isLoading) {\n      return;\n    }\n\n    const userMessage: Message = {\n      role: 'user',\n      content: this.currentMessage\n    };\n    this.messages.push(userMessage);\n\n    const request: ChatRequest = {\n      question: this.currentMessage,\n      sessionId: this.sessionId || undefined\n    };\n\n    this.currentMessage = '';\n    this.isLoading = true;\n\n    // Add placeholder for assistant response (will be filled with streaming tokens)\n    const assistantMessage: Message = {\n      role: 'assistant',\n      content: '',\n      sources: []\n    };\n    this.messages.push(assistantMessage);\n\n    // Use streaming API\n    this.chatService.sendMessageStreaming(request).subscribe({\n      next: (streamEvent) => {\n        if (streamEvent.type === 'token' && streamEvent.token) {\n          // Append token exactly as received from backend\n          console.log('Received token:', JSON.stringify(streamEvent.token));\n          assistantMessage.content += streamEvent.token;\n        } else if (streamEvent.type === 'metadata' && streamEvent.metadata) {\n          // Update session and metadata\n          this.sessionId = streamEvent.metadata.sessionId;\n          localStorage.setItem('chatq-session-id', streamEvent.metadata.sessionId);\n\n          if (streamEvent.metadata.sources) {\n            assistantMessage.sources = streamEvent.metadata.sources;\n          }\n\n          if (streamEvent.metadata.handoffTriggered) {\n            this.messages.push({\n              role: 'assistant',\n              content: 'Ich verbinde Sie mit einem Mitarbeiter.'\n            });\n          }\n        } else if (streamEvent.type === 'messageId' && streamEvent.messageId) {\n          // Store message ID for feedback\n          assistantMessage.id = streamEvent.messageId;\n          assistantMessage.feedbackGiven = null;\n        } else if (streamEvent.type === 'complete') {\n          this.isLoading = false;\n        } else if (streamEvent.type === 'error') {\n          console.error('Streaming error:', streamEvent.error);\n          assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n          this.isLoading = false;\n        }\n      },\n      error: (error) => {\n        console.error('Chat error:', error);\n        assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n        this.isLoading = false;\n      },\n      complete: () => {\n        this.isLoading = false;\n      }\n    });\n  }\n\n  handleKeyPress(event: KeyboardEvent) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n\n  giveFeedback(message: Message, feedbackType: 'POSITIVE' | 'NEGATIVE') {\n    if (!message.id) {\n      console.warn('Cannot give feedback: message has no ID');\n      return;\n    }\n\n    // Prevent duplicate feedback\n    if (message.feedbackGiven) {\n      console.log('Feedback already given for this message');\n      return;\n    }\n\n    this.chatService.submitFeedback({\n      messageId: message.id,\n      feedbackType: feedbackType\n    }).subscribe({\n      next: () => {\n        message.feedbackGiven = feedbackType;\n        console.log('Feedback submitted successfully:', feedbackType);\n      },\n      error: (error) => {\n        console.error('Failed to submit feedback:', error);\n      }\n    });\n  }\n}\n","<!-- Floating Chat Button -->\n<button\n  *ngIf=\"!isOpen\"\n  class=\"chat-button\"\n  [attr.data-theme]=\"theme\"\n  (click)=\"toggleWidget()\"\n  aria-label=\"Open chat\">\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n    <path d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"></path>\n  </svg>\n</button>\n\n<!-- Chat Panel -->\n<div *ngIf=\"isOpen\" class=\"chat-panel\" [attr.data-theme]=\"theme\">\n  <!-- Header -->\n  <div class=\"chat-header\">\n    <div class=\"header-content\">\n      <h3>ChatQ Assist</h3>\n      <p>How can we help you?</p>\n    </div>\n    <div class=\"header-actions\">\n      <button (click)=\"toggleTheme()\" class=\"icon-button\" aria-label=\"Toggle theme\">\n        <svg *ngIf=\"theme === 'light'\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\n        </svg>\n        <svg *ngIf=\"theme === 'dark'\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\n          <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\n          <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\n          <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\n          <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\n          <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n          <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\n          <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\n          <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\n        </svg>\n      </button>\n      <button (click)=\"toggleWidget()\" class=\"icon-button\" aria-label=\"Close chat\">\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Messages -->\n  <div class=\"chat-messages\">\n    <div *ngIf=\"messages.length === 0\" class=\"welcome-message\">\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <path d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"></path>\n      </svg>\n      <h4>Welcome to ChatQ Assist</h4>\n      <p>Ask us anything about our products and services.</p>\n    </div>\n\n    <div *ngFor=\"let message of messages\" class=\"message\" [class.user]=\"message.role === 'user'\">\n      <div class=\"message-content\">\n        {{ message.content }}\n      </div>\n      <div *ngIf=\"message.sources && message.sources.length > 0\" class=\"message-sources\">\n        <p class=\"sources-label\">Sources:</p>\n        <div *ngFor=\"let source of message.sources\" class=\"source-item\">\n          <span class=\"source-type\">{{ source.type }}</span>\n          <a *ngIf=\"source.url\" [href]=\"source.url\" target=\"_blank\">{{ source.title }}</a>\n          <span *ngIf=\"!source.url\">{{ source.title }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"isLoading\" class=\"message typing\">\n      <div class=\"typing-indicator\">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </div>\n  </div>\n\n  <!-- Input -->\n  <div class=\"chat-input\">\n    <textarea\n      [(ngModel)]=\"currentMessage\"\n      (keypress)=\"handleKeyPress($event)\"\n      placeholder=\"Type your message...\"\n      rows=\"1\"\n      [disabled]=\"isLoading\"></textarea>\n    <button\n      (click)=\"sendMessage()\"\n      [disabled]=\"!currentMessage.trim() || isLoading\"\n      aria-label=\"Send message\">\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n        <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n      </svg>\n    </button>\n  </div>\n\n  <!-- DSGVO Notice -->\n  <div class=\"privacy-notice\">\n    <small>Your privacy matters. We process data according to GDPR.</small>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}