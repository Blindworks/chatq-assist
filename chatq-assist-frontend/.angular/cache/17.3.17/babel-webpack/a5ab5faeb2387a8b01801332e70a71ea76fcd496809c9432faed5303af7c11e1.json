{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/chat.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ChatWidgetComponent_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_button_0_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleWidget());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 3);\n    i0.ɵɵelement(2, \"path\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"data-theme\", ctx_r1.theme);\n  }\n}\nfunction ChatWidgetComponent_div_1__svg_svg_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12);\n    i0.ɵɵelement(1, \"path\", 25);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatWidgetComponent_div_1__svg_svg_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12);\n    i0.ɵɵelement(1, \"circle\", 26)(2, \"line\", 27)(3, \"line\", 28)(4, \"line\", 29)(5, \"line\", 30)(6, \"line\", 31)(7, \"line\", 32)(8, \"line\", 33)(9, \"line\", 34);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatWidgetComponent_div_1_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 36);\n    i0.ɵɵelement(2, \"path\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"Welcome to ChatQ Assist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Ask us anything about our products and services.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 48);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"href\", source_r4.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(source_r4.title);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(source_r4.title);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"span\", 45);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template, 2, 2, \"a\", 46)(4, ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template, 2, 1, \"span\", 47);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(source_r4.type);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", source_r4.url);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !source_r4.url);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"p\", 42);\n    i0.ɵɵtext(2, \"Sources:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_div_3_Template, 5, 3, \"div\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", message_r5.sources);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_div_17_div_4_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const message_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.giveFeedback(message_r5, \"POSITIVE\"));\n    });\n    i0.ɵɵtext(2, \" \\uD83D\\uDC4D \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 51);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_div_17_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const message_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.giveFeedback(message_r5, \"NEGATIVE\"));\n    });\n    i0.ɵɵtext(4, \" \\uD83D\\uDC4E \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"active\", message_r5.feedbackGiven === \"POSITIVE\");\n    i0.ɵɵproperty(\"disabled\", message_r5.feedbackGiven !== null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"active\", message_r5.feedbackGiven === \"NEGATIVE\");\n    i0.ɵɵproperty(\"disabled\", message_r5.feedbackGiven !== null);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"div\", 38);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_Template, 4, 1, \"div\", 39)(4, ChatWidgetComponent_div_1_div_17_div_4_Template, 5, 6, \"div\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r5 = ctx.$implicit;\n    i0.ɵɵclassProp(\"user\", message_r5.role === \"user\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", message_r5.content, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r5.sources && message_r5.sources.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r5.role === \"assistant\" && message_r5.id);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53);\n    i0.ɵɵelement(2, \"span\")(3, \"span\")(4, \"span\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatWidgetComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7)(3, \"h3\");\n    i0.ɵɵtext(4, \"ChatQ Assist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"How can we help you?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleTheme());\n    });\n    i0.ɵɵtemplate(9, ChatWidgetComponent_div_1__svg_svg_9_Template, 2, 0, \"svg\", 10)(10, ChatWidgetComponent_div_1__svg_svg_10_Template, 10, 0, \"svg\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleWidget());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(12, \"svg\", 12);\n    i0.ɵɵelement(13, \"line\", 13)(14, \"line\", 14);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(15, \"div\", 15);\n    i0.ɵɵtemplate(16, ChatWidgetComponent_div_1_div_16_Template, 7, 0, \"div\", 16)(17, ChatWidgetComponent_div_1_div_17_Template, 5, 5, \"div\", 17)(18, ChatWidgetComponent_div_1_div_18_Template, 5, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 19)(20, \"textarea\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChatWidgetComponent_div_1_Template_textarea_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.currentMessage, $event) || (ctx_r1.currentMessage = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"keypress\", function ChatWidgetComponent_div_1_Template_textarea_keypress_20_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleKeyPress($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.sendMessage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(22, \"svg\", 12);\n    i0.ɵɵelement(23, \"line\", 22)(24, \"polygon\", 23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(25, \"div\", 24)(26, \"small\");\n    i0.ɵɵtext(27, \"Your privacy matters. We process data according to GDPR.\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"data-theme\", ctx_r1.theme);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.theme === \"light\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.theme === \"dark\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.messages.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.messages);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.currentMessage);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.currentMessage.trim() || ctx_r1.isLoading);\n  }\n}\nexport let ChatWidgetComponent = /*#__PURE__*/(() => {\n  class ChatWidgetComponent {\n    constructor(chatService) {\n      this.chatService = chatService;\n      this.isOpen = false;\n      this.messages = [];\n      this.currentMessage = '';\n      this.sessionId = null;\n      this.isLoading = false;\n      this.theme = 'light';\n    }\n    ngOnInit() {\n      // Check for saved session\n      this.sessionId = localStorage.getItem('chatq-session-id');\n      // Load conversation history if session exists\n      if (this.sessionId) {\n        this.loadConversationHistory();\n      }\n      // Check system theme preference\n      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n        this.theme = 'dark';\n      }\n    }\n    loadConversationHistory() {\n      if (!this.sessionId) return;\n      this.chatService.getHistory(this.sessionId).subscribe({\n        next: history => {\n          console.log('Loaded conversation history:', history);\n          this.messages = history.map(msg => ({\n            role: msg.role === 'USER' ? 'user' : 'assistant',\n            content: msg.content,\n            sources: [],\n            id: msg.id,\n            feedbackGiven: null\n          }));\n        },\n        error: error => {\n          console.error('Failed to load conversation history:', error);\n          // Clear invalid session\n          localStorage.removeItem('chatq-session-id');\n          this.sessionId = null;\n        }\n      });\n    }\n    toggleWidget() {\n      this.isOpen = !this.isOpen;\n    }\n    toggleTheme() {\n      this.theme = this.theme === 'light' ? 'dark' : 'light';\n    }\n    sendMessage() {\n      if (!this.currentMessage.trim() || this.isLoading) {\n        return;\n      }\n      const userMessage = {\n        role: 'user',\n        content: this.currentMessage\n      };\n      this.messages.push(userMessage);\n      const request = {\n        question: this.currentMessage,\n        sessionId: this.sessionId || undefined\n      };\n      this.currentMessage = '';\n      this.isLoading = true;\n      // Add placeholder for assistant response (will be filled with streaming tokens)\n      const assistantMessage = {\n        role: 'assistant',\n        content: '',\n        sources: []\n      };\n      this.messages.push(assistantMessage);\n      // Use streaming API\n      this.chatService.sendMessageStreaming(request).subscribe({\n        next: streamEvent => {\n          if (streamEvent.type === 'token' && streamEvent.token) {\n            // Append token exactly as received from backend\n            console.log('Received token:', JSON.stringify(streamEvent.token));\n            assistantMessage.content += streamEvent.token;\n          } else if (streamEvent.type === 'metadata' && streamEvent.metadata) {\n            // Update session and metadata\n            this.sessionId = streamEvent.metadata.sessionId;\n            localStorage.setItem('chatq-session-id', streamEvent.metadata.sessionId);\n            if (streamEvent.metadata.sources) {\n              assistantMessage.sources = streamEvent.metadata.sources;\n            }\n            if (streamEvent.metadata.handoffTriggered) {\n              this.messages.push({\n                role: 'assistant',\n                content: 'Ich verbinde Sie mit einem Mitarbeiter.'\n              });\n            }\n          } else if (streamEvent.type === 'messageId' && streamEvent.messageId) {\n            // Store message ID for feedback\n            assistantMessage.id = streamEvent.messageId;\n            assistantMessage.feedbackGiven = null;\n          } else if (streamEvent.type === 'complete') {\n            this.isLoading = false;\n          } else if (streamEvent.type === 'error') {\n            console.error('Streaming error:', streamEvent.error);\n            assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n            this.isLoading = false;\n          }\n        },\n        error: error => {\n          console.error('Chat error:', error);\n          assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n          this.isLoading = false;\n        },\n        complete: () => {\n          this.isLoading = false;\n        }\n      });\n    }\n    handleKeyPress(event) {\n      if (event.key === 'Enter' && !event.shiftKey) {\n        event.preventDefault();\n        this.sendMessage();\n      }\n    }\n    giveFeedback(message, feedbackType) {\n      if (!message.id) {\n        console.warn('Cannot give feedback: message has no ID');\n        return;\n      }\n      // Prevent duplicate feedback\n      if (message.feedbackGiven) {\n        console.log('Feedback already given for this message');\n        return;\n      }\n      this.chatService.submitFeedback({\n        messageId: message.id,\n        feedbackType: feedbackType\n      }).subscribe({\n        next: () => {\n          message.feedbackGiven = feedbackType;\n          console.log('Feedback submitted successfully:', feedbackType);\n        },\n        error: error => {\n          console.error('Failed to submit feedback:', error);\n        }\n      });\n    }\n    static {\n      this.ɵfac = function ChatWidgetComponent_Factory(t) {\n        return new (t || ChatWidgetComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ChatWidgetComponent,\n        selectors: [[\"app-chat-widget\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 2,\n        vars: 2,\n        consts: [[\"class\", \"chat-button\", \"aria-label\", \"Open chat\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"chat-panel\", 4, \"ngIf\"], [\"aria-label\", \"Open chat\", 1, \"chat-button\", 3, \"click\"], [\"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"d\", \"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"], [1, \"chat-panel\"], [1, \"chat-header\"], [1, \"header-content\"], [1, \"header-actions\"], [\"aria-label\", \"Toggle theme\", 1, \"icon-button\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", 4, \"ngIf\"], [\"aria-label\", \"Close chat\", 1, \"icon-button\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [1, \"chat-messages\"], [\"class\", \"welcome-message\", 4, \"ngIf\"], [\"class\", \"message\", 3, \"user\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"message typing\", 4, \"ngIf\"], [1, \"chat-input\"], [\"placeholder\", \"Type your message...\", \"rows\", \"1\", 3, \"ngModelChange\", \"keypress\", \"ngModel\", \"disabled\"], [\"aria-label\", \"Send message\", 3, \"click\", \"disabled\"], [\"x1\", \"22\", \"y1\", \"2\", \"x2\", \"11\", \"y2\", \"13\"], [\"points\", \"22 2 15 22 11 13 2 9 22 2\"], [1, \"privacy-notice\"], [\"d\", \"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"5\"], [\"x1\", \"12\", \"y1\", \"1\", \"x2\", \"12\", \"y2\", \"3\"], [\"x1\", \"12\", \"y1\", \"21\", \"x2\", \"12\", \"y2\", \"23\"], [\"x1\", \"4.22\", \"y1\", \"4.22\", \"x2\", \"5.64\", \"y2\", \"5.64\"], [\"x1\", \"18.36\", \"y1\", \"18.36\", \"x2\", \"19.78\", \"y2\", \"19.78\"], [\"x1\", \"1\", \"y1\", \"12\", \"x2\", \"3\", \"y2\", \"12\"], [\"x1\", \"21\", \"y1\", \"12\", \"x2\", \"23\", \"y2\", \"12\"], [\"x1\", \"4.22\", \"y1\", \"19.78\", \"x2\", \"5.64\", \"y2\", \"18.36\"], [\"x1\", \"18.36\", \"y1\", \"5.64\", \"x2\", \"19.78\", \"y2\", \"4.22\"], [1, \"welcome-message\"], [\"width\", \"48\", \"height\", \"48\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [1, \"message\"], [1, \"message-content\"], [\"class\", \"message-sources\", 4, \"ngIf\"], [\"class\", \"message-feedback\", 4, \"ngIf\"], [1, \"message-sources\"], [1, \"sources-label\"], [\"class\", \"source-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"source-item\"], [1, \"source-type\"], [\"target\", \"_blank\", 3, \"href\", 4, \"ngIf\"], [4, \"ngIf\"], [\"target\", \"_blank\", 3, \"href\"], [1, \"message-feedback\"], [\"aria-label\", \"Helpful\", 1, \"feedback-btn\", 3, \"click\", \"disabled\"], [\"aria-label\", \"Not helpful\", 1, \"feedback-btn\", 3, \"click\", \"disabled\"], [1, \"message\", \"typing\"], [1, \"typing-indicator\"]],\n        template: function ChatWidgetComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, ChatWidgetComponent_button_0_Template, 3, 1, \"button\", 0)(1, ChatWidgetComponent_div_1_Template, 28, 9, \"div\", 1);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", !ctx.isOpen);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n        styles: [\".chat-button[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;width:60px;height:60px;border-radius:50%;border:none;cursor:pointer;box-shadow:0 4px 12px #00000026;transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center}.chat-button[data-theme=light][_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.chat-button[data-theme=dark][_ngcontent-%COMP%]{background:linear-gradient(135deg,#434343,#000);color:#fff}.chat-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 16px #0003}.chat-panel[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;width:380px;height:600px;border-radius:16px;box-shadow:0 8px 24px #00000026;display:flex;flex-direction:column;z-index:1000;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .3s ease}.chat-panel[data-theme=light][_ngcontent-%COMP%]{background:#fff;color:#333}.chat-panel[data-theme=dark][_ngcontent-%COMP%]{background:#1a1a1a;color:#f0f0f0}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.chat-header[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;justify-content:space-between;align-items:center}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#434343,#000)}.header-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 4px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:0;opacity:.9}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.icon-button[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:8px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:background .2s}.icon-button[_ngcontent-%COMP%]:hover{background:#ffffff4d}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:16px}.chat-panel[data-theme=light][_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{background:#f5f5f5}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{background:#0f0f0f}.welcome-message[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.welcome-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.welcome-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin:0 0 8px}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.message.user[_ngcontent-%COMP%]{align-items:flex-end}.message-content[_ngcontent-%COMP%]{max-width:80%;padding:12px 16px;border-radius:12px;font-size:14px;line-height:1.5;word-wrap:break-word;overflow-wrap:break-word;white-space:pre-wrap}.message[_ngcontent-%COMP%]:not(.user)   .message-content[_ngcontent-%COMP%]{background:#fff;color:#333;border-bottom-left-radius:4px}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:not(.user)   .message-content[_ngcontent-%COMP%]{background:#2a2a2a;color:#f0f0f0}.message.user[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-bottom-right-radius:4px}.message-sources[_ngcontent-%COMP%]{font-size:12px;padding:8px;background:#00000008;border-radius:8px;max-width:80%}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .message-sources[_ngcontent-%COMP%]{background:#ffffff0d}.sources-label[_ngcontent-%COMP%]{font-weight:600;margin:0 0 4px}.source-item[_ngcontent-%COMP%]{margin:4px 0;display:flex;gap:8px;align-items:center}.source-type[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;background:#667eea;color:#fff;border-radius:4px;text-transform:uppercase;font-weight:600}.typing-indicator[_ngcontent-%COMP%]{display:flex;gap:4px;padding:12px 16px;background:#fff;border-radius:12px;width:-moz-fit-content;width:fit-content}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]{background:#2a2a2a}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;background:#999;border-radius:50%;animation:_ngcontent-%COMP%_typing 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{opacity:.3}30%{opacity:1}}.chat-input[_ngcontent-%COMP%]{padding:16px;display:flex;gap:8px;align-items:flex-end;border-top:1px solid #e0e0e0}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{border-top-color:#333;background:#1a1a1a}.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;font-family:inherit;resize:none;max-height:100px}.chat-panel[data-theme=light][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#fff;color:#333}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#2a2a2a;color:#f0f0f0;border-color:#444}.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;border:none;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:opacity .2s}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{opacity:.9}.message-feedback[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}.feedback-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid #e0e0e0;border-radius:6px;padding:4px 12px;font-size:16px;cursor:pointer;transition:all .2s;opacity:.6}.feedback-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:1;background:#667eea1a;border-color:#667eea;transform:scale(1.1)}.feedback-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.feedback-btn.active[_ngcontent-%COMP%]{opacity:1;background:#667eea33;border-color:#667eea}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]{border-color:#444}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea33}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .feedback-btn.active[_ngcontent-%COMP%]{background:#667eea4d}.privacy-notice[_ngcontent-%COMP%]{padding:12px 16px;text-align:center;border-top:1px solid #e0e0e0}.chat-panel[data-theme=dark][_ngcontent-%COMP%]   .privacy-notice[_ngcontent-%COMP%]{border-top-color:#333}.privacy-notice[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#999}@media (max-width: 480px){.chat-panel[_ngcontent-%COMP%]{width:100%;height:100%;bottom:0;right:0;border-radius:0}.chat-button[_ngcontent-%COMP%]{bottom:16px;right:16px}}\"]\n      });\n    }\n  }\n  return ChatWidgetComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}