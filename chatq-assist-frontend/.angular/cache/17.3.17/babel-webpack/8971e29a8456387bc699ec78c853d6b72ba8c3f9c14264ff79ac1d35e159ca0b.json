{"ast":null,"code":"import { HttpHeaders, HttpParams } from '@angular/common/http';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AnalyticsService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${environment.apiUrl}/analytics`;\n  }\n  getHeaders() {\n    return new HttpHeaders({\n      'X-Tenant-ID': 'default-tenant'\n    });\n  }\n  getAnalytics(daysBack = 30) {\n    const params = new HttpParams().set('daysBack', daysBack.toString());\n    return this.http.get(this.apiUrl, {\n      headers: this.getHeaders(),\n      params: params\n    });\n  }\n  static {\n    this.ɵfac = function AnalyticsService_Factory(t) {\n      return new (t || AnalyticsService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AnalyticsService,\n      factory: AnalyticsService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["HttpHeaders","HttpParams","environment","AnalyticsService","constructor","http","apiUrl","getHeaders","getAnalytics","daysBack","params","set","toString","get","headers","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\bened\\IdeaProjects\\ChatQ-Assist\\chatq-assist-frontend\\src\\app\\services\\analytics.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\n\nexport interface FeedbackMetrics {\n  totalFeedback: number;\n  positiveFeedback: number;\n  negativeFeedback: number;\n  positiveRate: number;\n  negativeRate: number;\n}\n\nexport interface FaqPerformance {\n  faqId: number;\n  question: string;\n  usageCount: number;\n  averageConfidence?: number;\n  positiveFeedbackCount: number;\n  negativeFeedbackCount: number;\n  satisfactionRate: number;\n}\n\nexport interface ConversationMetrics {\n  totalConversations: number;\n  activeConversations: number;\n  closedConversations: number;\n  handedOffConversations: number;\n  averageMessagesPerConversation: number;\n  totalMessages: number;\n}\n\nexport interface Analytics {\n  totalQuestions?: number;\n  answeredQuestions?: number;\n  handoffCount?: number;\n  deflectionRate?: number;\n  averageConfidence?: number;\n  feedbackMetrics: FeedbackMetrics;\n  topFaqs: FaqPerformance[];\n  conversationMetrics: ConversationMetrics;\n  questionsByDate: { [key: string]: number };\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsService {\n  private apiUrl = `${environment.apiUrl}/analytics`;\n\n  constructor(private http: HttpClient) {}\n\n  private getHeaders(): HttpHeaders {\n    return new HttpHeaders({\n      'X-Tenant-ID': 'default-tenant'\n    });\n  }\n\n  getAnalytics(daysBack: number = 30): Observable<Analytics> {\n    const params = new HttpParams().set('daysBack', daysBack.toString());\n    return this.http.get<Analytics>(this.apiUrl, {\n      headers: this.getHeaders(),\n      params: params\n    });\n  }\n}\n"],"mappings":"AACA,SAAqBA,WAAW,EAAEC,UAAU,QAAQ,sBAAsB;AAE1E,SAASC,WAAW,QAAQ,gCAAgC;;;AA4C5D,OAAM,MAAOC,gBAAgB;EAG3BC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,MAAM,GAAG,GAAGJ,WAAW,CAACI,MAAM,YAAY;EAEX;EAE/BC,UAAUA,CAAA;IAChB,OAAO,IAAIP,WAAW,CAAC;MACrB,aAAa,EAAE;KAChB,CAAC;EACJ;EAEAQ,YAAYA,CAACC,QAAA,GAAmB,EAAE;IAChC,MAAMC,MAAM,GAAG,IAAIT,UAAU,EAAE,CAACU,GAAG,CAAC,UAAU,EAAEF,QAAQ,CAACG,QAAQ,EAAE,CAAC;IACpE,OAAO,IAAI,CAACP,IAAI,CAACQ,GAAG,CAAY,IAAI,CAACP,MAAM,EAAE;MAC3CQ,OAAO,EAAE,IAAI,CAACP,UAAU,EAAE;MAC1BG,MAAM,EAAEA;KACT,CAAC;EACJ;;;uBAjBWP,gBAAgB,EAAAY,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAhBf,gBAAgB;MAAAgB,OAAA,EAAhBhB,gBAAgB,CAAAiB,IAAA;MAAAC,UAAA,EAFf;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}