{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/chat.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ChatWidgetComponent_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_button_0_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleWidget());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 3);\n    i0.ɵɵelement(2, \"path\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"data-theme\", ctx_r1.theme);\n  }\n}\nfunction ChatWidgetComponent_div_1__svg_svg_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12);\n    i0.ɵɵelement(1, \"path\", 25);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatWidgetComponent_div_1__svg_svg_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12);\n    i0.ɵɵelement(1, \"circle\", 26)(2, \"line\", 27)(3, \"line\", 28)(4, \"line\", 29)(5, \"line\", 30)(6, \"line\", 31)(7, \"line\", 32)(8, \"line\", 33)(9, \"line\", 34);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatWidgetComponent_div_1_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 36);\n    i0.ɵɵelement(2, \"path\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"Welcome to ChatQ Assist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Ask us anything about our products and services.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 48);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"href\", source_r4.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(source_r4.title);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(source_r4.title);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"span\", 45);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template, 2, 2, \"a\", 46)(4, ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template, 2, 1, \"span\", 47);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(source_r4.type);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", source_r4.url);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !source_r4.url);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"p\", 42);\n    i0.ɵɵtext(2, \"Sources:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_div_3_Template, 5, 3, \"div\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", message_r5.sources);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_div_17_div_4_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const message_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.giveFeedback(message_r5, \"POSITIVE\"));\n    });\n    i0.ɵɵtext(2, \" \\uD83D\\uDC4D \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 51);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_div_17_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const message_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.giveFeedback(message_r5, \"NEGATIVE\"));\n    });\n    i0.ɵɵtext(4, \" \\uD83D\\uDC4E \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"active\", message_r5.feedbackGiven === \"POSITIVE\");\n    i0.ɵɵproperty(\"disabled\", message_r5.feedbackGiven !== null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"active\", message_r5.feedbackGiven === \"NEGATIVE\");\n    i0.ɵɵproperty(\"disabled\", message_r5.feedbackGiven !== null);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"div\", 38);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatWidgetComponent_div_1_div_17_div_3_Template, 4, 1, \"div\", 39)(4, ChatWidgetComponent_div_1_div_17_div_4_Template, 5, 6, \"div\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r5 = ctx.$implicit;\n    i0.ɵɵclassProp(\"user\", message_r5.role === \"user\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", message_r5.content, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r5.sources && message_r5.sources.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r5.role === \"assistant\" && message_r5.id);\n  }\n}\nfunction ChatWidgetComponent_div_1_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53);\n    i0.ɵɵelement(2, \"span\")(3, \"span\")(4, \"span\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatWidgetComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7)(3, \"h3\");\n    i0.ɵɵtext(4, \"ChatQ Assist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"How can we help you?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleTheme());\n    });\n    i0.ɵɵtemplate(9, ChatWidgetComponent_div_1__svg_svg_9_Template, 2, 0, \"svg\", 10)(10, ChatWidgetComponent_div_1__svg_svg_10_Template, 10, 0, \"svg\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleWidget());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(12, \"svg\", 12);\n    i0.ɵɵelement(13, \"line\", 13)(14, \"line\", 14);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(15, \"div\", 15);\n    i0.ɵɵtemplate(16, ChatWidgetComponent_div_1_div_16_Template, 7, 0, \"div\", 16)(17, ChatWidgetComponent_div_1_div_17_Template, 5, 5, \"div\", 17)(18, ChatWidgetComponent_div_1_div_18_Template, 5, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 19)(20, \"textarea\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChatWidgetComponent_div_1_Template_textarea_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.currentMessage, $event) || (ctx_r1.currentMessage = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"keypress\", function ChatWidgetComponent_div_1_Template_textarea_keypress_20_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleKeyPress($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ChatWidgetComponent_div_1_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.sendMessage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(22, \"svg\", 12);\n    i0.ɵɵelement(23, \"line\", 22)(24, \"polygon\", 23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(25, \"div\", 24)(26, \"small\");\n    i0.ɵɵtext(27, \"Your privacy matters. We process data according to GDPR.\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"data-theme\", ctx_r1.theme);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.theme === \"light\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.theme === \"dark\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.messages.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.messages);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.currentMessage);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.currentMessage.trim() || ctx_r1.isLoading);\n  }\n}\nexport class ChatWidgetComponent {\n  constructor(chatService) {\n    this.chatService = chatService;\n    this.isOpen = false;\n    this.messages = [];\n    this.currentMessage = '';\n    this.sessionId = null;\n    this.isLoading = false;\n    this.theme = 'light';\n  }\n  ngOnInit() {\n    // Check for saved session\n    this.sessionId = localStorage.getItem('chatq-session-id');\n    // Load conversation history if session exists\n    if (this.sessionId) {\n      this.loadConversationHistory();\n    }\n    // Check system theme preference\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      this.theme = 'dark';\n    }\n  }\n  loadConversationHistory() {\n    if (!this.sessionId) return;\n    this.chatService.getHistory(this.sessionId).subscribe({\n      next: history => {\n        console.log('Loaded conversation history:', history);\n        this.messages = history.map(msg => ({\n          role: msg.role === 'USER' ? 'user' : 'assistant',\n          content: msg.content,\n          sources: [],\n          id: msg.id,\n          feedbackGiven: null\n        }));\n      },\n      error: error => {\n        console.error('Failed to load conversation history:', error);\n        // Clear invalid session\n        localStorage.removeItem('chatq-session-id');\n        this.sessionId = null;\n      }\n    });\n  }\n  toggleWidget() {\n    this.isOpen = !this.isOpen;\n  }\n  toggleTheme() {\n    this.theme = this.theme === 'light' ? 'dark' : 'light';\n  }\n  sendMessage() {\n    if (!this.currentMessage.trim() || this.isLoading) {\n      return;\n    }\n    const userMessage = {\n      role: 'user',\n      content: this.currentMessage\n    };\n    this.messages.push(userMessage);\n    const request = {\n      question: this.currentMessage,\n      sessionId: this.sessionId || undefined\n    };\n    this.currentMessage = '';\n    this.isLoading = true;\n    // Add placeholder for assistant response (will be filled with streaming tokens)\n    const assistantMessage = {\n      role: 'assistant',\n      content: '',\n      sources: []\n    };\n    this.messages.push(assistantMessage);\n    // Use streaming API\n    this.chatService.sendMessageStreaming(request).subscribe({\n      next: streamEvent => {\n        if (streamEvent.type === 'token' && streamEvent.token) {\n          // Append token exactly as received from backend\n          console.log('Received token:', JSON.stringify(streamEvent.token));\n          assistantMessage.content += streamEvent.token;\n        } else if (streamEvent.type === 'metadata' && streamEvent.metadata) {\n          // Update session and metadata\n          this.sessionId = streamEvent.metadata.sessionId;\n          localStorage.setItem('chatq-session-id', streamEvent.metadata.sessionId);\n          if (streamEvent.metadata.sources) {\n            assistantMessage.sources = streamEvent.metadata.sources;\n          }\n          if (streamEvent.metadata.handoffTriggered) {\n            this.messages.push({\n              role: 'assistant',\n              content: 'Ich verbinde Sie mit einem Mitarbeiter.'\n            });\n          }\n        } else if (streamEvent.type === 'messageId' && streamEvent.messageId) {\n          // Store message ID for feedback\n          assistantMessage.id = streamEvent.messageId;\n          assistantMessage.feedbackGiven = null;\n        } else if (streamEvent.type === 'complete') {\n          this.isLoading = false;\n        } else if (streamEvent.type === 'error') {\n          console.error('Streaming error:', streamEvent.error);\n          assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n          this.isLoading = false;\n        }\n      },\n      error: error => {\n        console.error('Chat error:', error);\n        assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n        this.isLoading = false;\n      },\n      complete: () => {\n        this.isLoading = false;\n      }\n    });\n  }\n  handleKeyPress(event) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n  giveFeedback(message, feedbackType) {\n    if (!message.id) {\n      console.warn('Cannot give feedback: message has no ID');\n      return;\n    }\n    // Prevent duplicate feedback\n    if (message.feedbackGiven) {\n      console.log('Feedback already given for this message');\n      return;\n    }\n    this.chatService.submitFeedback({\n      messageId: message.id,\n      feedbackType: feedbackType\n    }).subscribe({\n      next: () => {\n        message.feedbackGiven = feedbackType;\n        console.log('Feedback submitted successfully:', feedbackType);\n      },\n      error: error => {\n        console.error('Failed to submit feedback:', error);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function ChatWidgetComponent_Factory(t) {\n      return new (t || ChatWidgetComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatWidgetComponent,\n      selectors: [[\"app-chat-widget\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 2,\n      vars: 2,\n      consts: [[\"class\", \"chat-button\", \"aria-label\", \"Open chat\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"chat-panel\", 4, \"ngIf\"], [\"aria-label\", \"Open chat\", 1, \"chat-button\", 3, \"click\"], [\"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"d\", \"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"], [1, \"chat-panel\"], [1, \"chat-header\"], [1, \"header-content\"], [1, \"header-actions\"], [\"aria-label\", \"Toggle theme\", 1, \"icon-button\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", 4, \"ngIf\"], [\"aria-label\", \"Close chat\", 1, \"icon-button\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [1, \"chat-messages\"], [\"class\", \"welcome-message\", 4, \"ngIf\"], [\"class\", \"message\", 3, \"user\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"message typing\", 4, \"ngIf\"], [1, \"chat-input\"], [\"placeholder\", \"Type your message...\", \"rows\", \"1\", 3, \"ngModelChange\", \"keypress\", \"ngModel\", \"disabled\"], [\"aria-label\", \"Send message\", 3, \"click\", \"disabled\"], [\"x1\", \"22\", \"y1\", \"2\", \"x2\", \"11\", \"y2\", \"13\"], [\"points\", \"22 2 15 22 11 13 2 9 22 2\"], [1, \"privacy-notice\"], [\"d\", \"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"5\"], [\"x1\", \"12\", \"y1\", \"1\", \"x2\", \"12\", \"y2\", \"3\"], [\"x1\", \"12\", \"y1\", \"21\", \"x2\", \"12\", \"y2\", \"23\"], [\"x1\", \"4.22\", \"y1\", \"4.22\", \"x2\", \"5.64\", \"y2\", \"5.64\"], [\"x1\", \"18.36\", \"y1\", \"18.36\", \"x2\", \"19.78\", \"y2\", \"19.78\"], [\"x1\", \"1\", \"y1\", \"12\", \"x2\", \"3\", \"y2\", \"12\"], [\"x1\", \"21\", \"y1\", \"12\", \"x2\", \"23\", \"y2\", \"12\"], [\"x1\", \"4.22\", \"y1\", \"19.78\", \"x2\", \"5.64\", \"y2\", \"18.36\"], [\"x1\", \"18.36\", \"y1\", \"5.64\", \"x2\", \"19.78\", \"y2\", \"4.22\"], [1, \"welcome-message\"], [\"width\", \"48\", \"height\", \"48\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [1, \"message\"], [1, \"message-content\"], [\"class\", \"message-sources\", 4, \"ngIf\"], [\"class\", \"message-feedback\", 4, \"ngIf\"], [1, \"message-sources\"], [1, \"sources-label\"], [\"class\", \"source-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"source-item\"], [1, \"source-type\"], [\"target\", \"_blank\", 3, \"href\", 4, \"ngIf\"], [4, \"ngIf\"], [\"target\", \"_blank\", 3, \"href\"], [1, \"message-feedback\"], [\"aria-label\", \"Helpful\", 1, \"feedback-btn\", 3, \"click\", \"disabled\"], [\"aria-label\", \"Not helpful\", 1, \"feedback-btn\", 3, \"click\", \"disabled\"], [1, \"message\", \"typing\"], [1, \"typing-indicator\"]],\n      template: function ChatWidgetComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, ChatWidgetComponent_button_0_Template, 3, 1, \"button\", 0)(1, ChatWidgetComponent_div_1_Template, 28, 9, \"div\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", !ctx.isOpen);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n      styles: [\"\\n\\n.chat-button[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 24px;\\n  right: 24px;\\n  width: 60px;\\n  height: 60px;\\n  border-radius: 50%;\\n  border: none;\\n  cursor: pointer;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n  transition: all 0.3s ease;\\n  z-index: 1000;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.chat-button[data-theme=\\\"light\\\"][_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n}\\n\\n.chat-button[data-theme=\\\"dark\\\"][_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #434343 0%, #000000 100%);\\n  color: white;\\n}\\n\\n.chat-button[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.1);\\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\\n}\\n\\n\\n\\n.chat-panel[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 24px;\\n  right: 24px;\\n  width: 380px;\\n  height: 600px;\\n  border-radius: 16px;\\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\\n  display: flex;\\n  flex-direction: column;\\n  z-index: 1000;\\n  overflow: hidden;\\n  animation: _ngcontent-%COMP%_slideIn 0.3s ease;\\n}\\n\\n.chat-panel[data-theme=\\\"light\\\"][_ngcontent-%COMP%] {\\n  background: white;\\n  color: #333;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%] {\\n  background: #1a1a1a;\\n  color: #f0f0f0;\\n}\\n\\n@keyframes _ngcontent-%COMP%_slideIn {\\n  from {\\n    transform: translateY(20px);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: translateY(0);\\n    opacity: 1;\\n  }\\n}\\n\\n\\n\\n.chat-header[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #434343 0%, #000000 100%);\\n}\\n\\n.header-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  margin: 0 0 4px 0;\\n  font-weight: 600;\\n}\\n\\n.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 13px;\\n  margin: 0;\\n  opacity: 0.9;\\n}\\n\\n.header-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.icon-button[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.2);\\n  border: none;\\n  border-radius: 8px;\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n  color: white;\\n  transition: background 0.2s;\\n}\\n\\n.icon-button[_ngcontent-%COMP%]:hover {\\n  background: rgba(255, 255, 255, 0.3);\\n}\\n\\n\\n\\n.chat-messages[_ngcontent-%COMP%] {\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n}\\n\\n.chat-panel[data-theme=\\\"light\\\"][_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%] {\\n  background: #f5f5f5;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%] {\\n  background: #0f0f0f;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #999;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\\n  margin-bottom: 16px;\\n  opacity: 0.5;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  margin: 0 0 8px 0;\\n}\\n\\n.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  margin: 0;\\n}\\n\\n.message[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.message.user[_ngcontent-%COMP%] {\\n  align-items: flex-end;\\n}\\n\\n.message-content[_ngcontent-%COMP%] {\\n  max-width: 80%;\\n  padding: 12px 16px;\\n  border-radius: 12px;\\n  font-size: 14px;\\n  line-height: 1.5;\\n  word-wrap: break-word;\\n  overflow-wrap: break-word;\\n  white-space: pre-wrap;\\n}\\n\\n.message[_ngcontent-%COMP%]:not(.user)   .message-content[_ngcontent-%COMP%] {\\n  background: white;\\n  color: #333;\\n  border-bottom-left-radius: 4px;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:not(.user)   .message-content[_ngcontent-%COMP%] {\\n  background: #2a2a2a;\\n  color: #f0f0f0;\\n}\\n\\n.message.user[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n  border-bottom-right-radius: 4px;\\n}\\n\\n.message-sources[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  padding: 8px;\\n  background: rgba(0, 0, 0, 0.03);\\n  border-radius: 8px;\\n  max-width: 80%;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .message-sources[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.05);\\n}\\n\\n.sources-label[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  margin: 0 0 4px 0;\\n}\\n\\n.source-item[_ngcontent-%COMP%] {\\n  margin: 4px 0;\\n  display: flex;\\n  gap: 8px;\\n  align-items: center;\\n}\\n\\n.source-type[_ngcontent-%COMP%] {\\n  font-size: 10px;\\n  padding: 2px 6px;\\n  background: #667eea;\\n  color: white;\\n  border-radius: 4px;\\n  text-transform: uppercase;\\n  font-weight: 600;\\n}\\n\\n\\n\\n.typing-indicator[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 4px;\\n  padding: 12px 16px;\\n  background: white;\\n  border-radius: 12px;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%] {\\n  background: #2a2a2a;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  width: 8px;\\n  height: 8px;\\n  background: #999;\\n  border-radius: 50%;\\n  animation: _ngcontent-%COMP%_typing 1.4s infinite;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes _ngcontent-%COMP%_typing {\\n  0%, 60%, 100% {\\n    opacity: 0.3;\\n  }\\n  30% {\\n    opacity: 1;\\n  }\\n}\\n\\n\\n\\n.chat-input[_ngcontent-%COMP%] {\\n  padding: 16px;\\n  display: flex;\\n  gap: 8px;\\n  align-items: flex-end;\\n  border-top: 1px solid #e0e0e0;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%] {\\n  border-top-color: #333;\\n  background: #1a1a1a;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  flex: 1;\\n  padding: 12px;\\n  border: 1px solid #e0e0e0;\\n  border-radius: 8px;\\n  font-size: 14px;\\n  font-family: inherit;\\n  resize: none;\\n  max-height: 100px;\\n}\\n\\n.chat-panel[data-theme=\\\"light\\\"][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  background: white;\\n  color: #333;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  background: #2a2a2a;\\n  color: #f0f0f0;\\n  border-color: #444;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border-color: #667eea;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 40px;\\n  height: 40px;\\n  border-radius: 8px;\\n  border: none;\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: opacity 0.2s;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover {\\n  opacity: 0.9;\\n}\\n\\n\\n\\n.message-feedback[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 8px;\\n  margin-top: 8px;\\n}\\n\\n.feedback-btn[_ngcontent-%COMP%] {\\n  background: transparent;\\n  border: 1px solid #e0e0e0;\\n  border-radius: 6px;\\n  padding: 4px 12px;\\n  font-size: 16px;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n  opacity: 0.6;\\n}\\n\\n.feedback-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  opacity: 1;\\n  background: rgba(102, 126, 234, 0.1);\\n  border-color: #667eea;\\n  transform: scale(1.1);\\n}\\n\\n.feedback-btn[_ngcontent-%COMP%]:disabled {\\n  cursor: not-allowed;\\n}\\n\\n.feedback-btn.active[_ngcontent-%COMP%] {\\n  opacity: 1;\\n  background: rgba(102, 126, 234, 0.2);\\n  border-color: #667eea;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%] {\\n  border-color: #444;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background: rgba(102, 126, 234, 0.2);\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .feedback-btn.active[_ngcontent-%COMP%] {\\n  background: rgba(102, 126, 234, 0.3);\\n}\\n\\n\\n\\n.privacy-notice[_ngcontent-%COMP%] {\\n  padding: 12px 16px;\\n  text-align: center;\\n  border-top: 1px solid #e0e0e0;\\n}\\n\\n.chat-panel[data-theme=\\\"dark\\\"][_ngcontent-%COMP%]   .privacy-notice[_ngcontent-%COMP%] {\\n  border-top-color: #333;\\n}\\n\\n.privacy-notice[_ngcontent-%COMP%]   small[_ngcontent-%COMP%] {\\n  font-size: 11px;\\n  color: #999;\\n}\\n\\n\\n\\n@media (max-width: 480px) {\\n  .chat-panel[_ngcontent-%COMP%] {\\n    width: 100%;\\n    height: 100%;\\n    bottom: 0;\\n    right: 0;\\n    border-radius: 0;\\n  }\\n\\n  .chat-button[_ngcontent-%COMP%] {\\n    bottom: 16px;\\n    right: 16px;\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jaGF0LXdpZGdldC9jaGF0LXdpZGdldC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUNoQjtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osV0FBVztFQUNYLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixlQUFlO0VBQ2YsMENBQTBDO0VBQzFDLHlCQUF5QjtFQUN6QixhQUFhO0VBQ2IsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSw2REFBNkQ7RUFDN0QsWUFBWTtBQUNkOztBQUVBO0VBQ0UsNkRBQTZEO0VBQzdELFlBQVk7QUFDZDs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQix5Q0FBeUM7QUFDM0M7O0FBRUEsZUFBZTtBQUNmO0VBQ0UsZUFBZTtFQUNmLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsMENBQTBDO0VBQzFDLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQiw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsV0FBVztBQUNiOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGNBQWM7QUFDaEI7O0FBRUE7RUFDRTtJQUNFLDJCQUEyQjtJQUMzQixVQUFVO0VBQ1o7RUFDQTtJQUNFLHdCQUF3QjtJQUN4QixVQUFVO0VBQ1o7QUFDRjs7QUFFQSxXQUFXO0FBQ1g7RUFDRSxhQUFhO0VBQ2IsNkRBQTZEO0VBQzdELFlBQVk7RUFDWixhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLDZEQUE2RDtBQUMvRDs7QUFFQTtFQUNFLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFNBQVM7RUFDVCxZQUFZ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O0VBQ25CLHVCQUF1QjtFQUN2Qix3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBLHFCQUFxQjtBQUNyQjtFQUNFLGFBQWE7RUFDYixRQUFRO0VBQ1IsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2Qix5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtFQUNqQixlQUFlO0VBQ2YsZUFBZTtFQUNmLG9CQUFvQjtFQUNwQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxVQUFVO0VBQ1Ysb0NBQW9DO0VBQ3BDLHFCQUFxQjtFQUNyQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0VBQ1Ysb0NBQW9DO0VBQ3BDLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG9DQUFvQztBQUN0Qzs7QUFFQTtFQUNFLG9DQUFvQztBQUN0Qzs7QUFFQSxtQkFBbUI7QUFDbkI7RUFDRSxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUEsc0JBQXNCO0FBQ3RCO0VBQ0U7SUFDRSxXQUFXO0lBQ1gsWUFBWTtJQUNaLFNBQVM7SUFDVCxRQUFRO0lBQ1IsZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UsWUFBWTtJQUNaLFdBQVc7RUFDYjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyogQ2hhdCBCdXR0b24gKi9cbi5jaGF0LWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAyNHB4O1xuICByaWdodDogMjRweDtcbiAgd2lkdGg6IDYwcHg7XG4gIGhlaWdodDogNjBweDtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBib3JkZXI6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICB6LWluZGV4OiAxMDAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLmNoYXQtYnV0dG9uW2RhdGEtdGhlbWU9XCJsaWdodFwiXSB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLmNoYXQtYnV0dG9uW2RhdGEtdGhlbWU9XCJkYXJrXCJdIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzQzNDM0MyAwJSwgIzAwMDAwMCAxMDAlKTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uY2hhdC1idXR0b246aG92ZXIge1xuICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG4gIGJveC1zaGFkb3c6IDAgNnB4IDE2cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xufVxuXG4vKiBDaGF0IFBhbmVsICovXG4uY2hhdC1wYW5lbCB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAyNHB4O1xuICByaWdodDogMjRweDtcbiAgd2lkdGg6IDM4MHB4O1xuICBoZWlnaHQ6IDYwMHB4O1xuICBib3JkZXItcmFkaXVzOiAxNnB4O1xuICBib3gtc2hhZG93OiAwIDhweCAyNHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHotaW5kZXg6IDEwMDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGFuaW1hdGlvbjogc2xpZGVJbiAwLjNzIGVhc2U7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJsaWdodFwiXSB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBjb2xvcjogIzMzMztcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0ge1xuICBiYWNrZ3JvdW5kOiAjMWExYTFhO1xuICBjb2xvcjogI2YwZjBmMDtcbn1cblxuQGtleWZyYW1lcyBzbGlkZUluIHtcbiAgZnJvbSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDIwcHgpO1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgdG8ge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG59XG5cbi8qIEhlYWRlciAqL1xuLmNoYXQtaGVhZGVyIHtcbiAgcGFkZGluZzogMjBweDtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTtcbiAgY29sb3I6IHdoaXRlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJkYXJrXCJdIC5jaGF0LWhlYWRlciB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM0MzQzNDMgMCUsICMwMDAwMDAgMTAwJSk7XG59XG5cbi5oZWFkZXItY29udGVudCBoMyB7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgbWFyZ2luOiAwIDAgNHB4IDA7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5cbi5oZWFkZXItY29udGVudCBwIHtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBtYXJnaW46IDA7XG4gIG9wYWNpdHk6IDAuOTtcbn1cblxuLmhlYWRlci1hY3Rpb25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG59XG5cbi5pY29uLWJ1dHRvbiB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIHdpZHRoOiAzMnB4O1xuICBoZWlnaHQ6IDMycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzO1xufVxuXG4uaWNvbi1idXR0b246aG92ZXIge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XG59XG5cbi8qIE1lc3NhZ2VzICovXG4uY2hhdC1tZXNzYWdlcyB7XG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogMTZweDtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImxpZ2h0XCJdIC5jaGF0LW1lc3NhZ2VzIHtcbiAgYmFja2dyb3VuZDogI2Y1ZjVmNTtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLmNoYXQtbWVzc2FnZXMge1xuICBiYWNrZ3JvdW5kOiAjMGYwZjBmO1xufVxuXG4ud2VsY29tZS1tZXNzYWdlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gIGNvbG9yOiAjOTk5O1xufVxuXG4ud2VsY29tZS1tZXNzYWdlIHN2ZyB7XG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gIG9wYWNpdHk6IDAuNTtcbn1cblxuLndlbGNvbWUtbWVzc2FnZSBoNCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbWFyZ2luOiAwIDAgOHB4IDA7XG59XG5cbi53ZWxjb21lLW1lc3NhZ2UgcCB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luOiAwO1xufVxuXG4ubWVzc2FnZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogOHB4O1xufVxuXG4ubWVzc2FnZS51c2VyIHtcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xufVxuXG4ubWVzc2FnZS1jb250ZW50IHtcbiAgbWF4LXdpZHRoOiA4MCU7XG4gIHBhZGRpbmc6IDEycHggMTZweDtcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBsaW5lLWhlaWdodDogMS41O1xuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLm1lc3NhZ2U6bm90KC51c2VyKSAubWVzc2FnZS1jb250ZW50IHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGNvbG9yOiAjMzMzO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJkYXJrXCJdIC5tZXNzYWdlOm5vdCgudXNlcikgLm1lc3NhZ2UtY29udGVudCB7XG4gIGJhY2tncm91bmQ6ICMyYTJhMmE7XG4gIGNvbG9yOiAjZjBmMGYwO1xufVxuXG4ubWVzc2FnZS51c2VyIC5tZXNzYWdlLWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7XG59XG5cbi5tZXNzYWdlLXNvdXJjZXMge1xuICBmb250LXNpemU6IDEycHg7XG4gIHBhZGRpbmc6IDhweDtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjAzKTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBtYXgtd2lkdGg6IDgwJTtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLm1lc3NhZ2Utc291cmNlcyB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XG59XG5cbi5zb3VyY2VzLWxhYmVsIHtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgbWFyZ2luOiAwIDAgNHB4IDA7XG59XG5cbi5zb3VyY2UtaXRlbSB7XG4gIG1hcmdpbjogNHB4IDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogOHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uc291cmNlLXR5cGUge1xuICBmb250LXNpemU6IDEwcHg7XG4gIHBhZGRpbmc6IDJweCA2cHg7XG4gIGJhY2tncm91bmQ6ICM2NjdlZWE7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBmb250LXdlaWdodDogNjAwO1xufVxuXG4vKiBUeXBpbmcgSW5kaWNhdG9yICovXG4udHlwaW5nLWluZGljYXRvciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogNHB4O1xuICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICB3aWR0aDogZml0LWNvbnRlbnQ7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJkYXJrXCJdIC50eXBpbmctaW5kaWNhdG9yIHtcbiAgYmFja2dyb3VuZDogIzJhMmEyYTtcbn1cblxuLnR5cGluZy1pbmRpY2F0b3Igc3BhbiB7XG4gIHdpZHRoOiA4cHg7XG4gIGhlaWdodDogOHB4O1xuICBiYWNrZ3JvdW5kOiAjOTk5O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGFuaW1hdGlvbjogdHlwaW5nIDEuNHMgaW5maW5pdGU7XG59XG5cbi50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDIpIHtcbiAgYW5pbWF0aW9uLWRlbGF5OiAwLjJzO1xufVxuXG4udHlwaW5nLWluZGljYXRvciBzcGFuOm50aC1jaGlsZCgzKSB7XG4gIGFuaW1hdGlvbi1kZWxheTogMC40cztcbn1cblxuQGtleWZyYW1lcyB0eXBpbmcge1xuICAwJSwgNjAlLCAxMDAlIHtcbiAgICBvcGFjaXR5OiAwLjM7XG4gIH1cbiAgMzAlIHtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG59XG5cbi8qIElucHV0ICovXG4uY2hhdC1pbnB1dCB7XG4gIHBhZGRpbmc6IDE2cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogOHB4O1xuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTBlMGUwO1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSAuY2hhdC1pbnB1dCB7XG4gIGJvcmRlci10b3AtY29sb3I6ICMzMzM7XG4gIGJhY2tncm91bmQ6ICMxYTFhMWE7XG59XG5cbi5jaGF0LWlucHV0IHRleHRhcmVhIHtcbiAgZmxleDogMTtcbiAgcGFkZGluZzogMTJweDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBmb250LXNpemU6IDE0cHg7XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICByZXNpemU6IG5vbmU7XG4gIG1heC1oZWlnaHQ6IDEwMHB4O1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwibGlnaHRcIl0gLmNoYXQtaW5wdXQgdGV4dGFyZWEge1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgY29sb3I6ICMzMzM7XG59XG5cbi5jaGF0LXBhbmVsW2RhdGEtdGhlbWU9XCJkYXJrXCJdIC5jaGF0LWlucHV0IHRleHRhcmVhIHtcbiAgYmFja2dyb3VuZDogIzJhMmEyYTtcbiAgY29sb3I6ICNmMGYwZjA7XG4gIGJvcmRlci1jb2xvcjogIzQ0NDtcbn1cblxuLmNoYXQtaW5wdXQgdGV4dGFyZWE6Zm9jdXMge1xuICBvdXRsaW5lOiBub25lO1xuICBib3JkZXItY29sb3I6ICM2NjdlZWE7XG59XG5cbi5jaGF0LWlucHV0IGJ1dHRvbiB7XG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgYm9yZGVyOiBub25lO1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpO1xuICBjb2xvcjogd2hpdGU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbn1cblxuLmNoYXQtaW5wdXQgYnV0dG9uOmRpc2FibGVkIHtcbiAgb3BhY2l0eTogMC41O1xuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xufVxuXG4uY2hhdC1pbnB1dCBidXR0b246bm90KDpkaXNhYmxlZCk6aG92ZXIge1xuICBvcGFjaXR5OiAwLjk7XG59XG5cbi8qIE1lc3NhZ2UgRmVlZGJhY2sgKi9cbi5tZXNzYWdlLWZlZWRiYWNrIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG4gIG1hcmdpbi10b3A6IDhweDtcbn1cblxuLmZlZWRiYWNrLWJ0biB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIHBhZGRpbmc6IDRweCAxMnB4O1xuICBmb250LXNpemU6IDE2cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIG9wYWNpdHk6IDAuNjtcbn1cblxuLmZlZWRiYWNrLWJ0bjpob3Zlcjpub3QoOmRpc2FibGVkKSB7XG4gIG9wYWNpdHk6IDE7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4xKTtcbiAgYm9yZGVyLWNvbG9yOiAjNjY3ZWVhO1xuICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG59XG5cbi5mZWVkYmFjay1idG46ZGlzYWJsZWQge1xuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xufVxuXG4uZmVlZGJhY2stYnRuLmFjdGl2ZSB7XG4gIG9wYWNpdHk6IDE7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4yKTtcbiAgYm9yZGVyLWNvbG9yOiAjNjY3ZWVhO1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSAuZmVlZGJhY2stYnRuIHtcbiAgYm9yZGVyLWNvbG9yOiAjNDQ0O1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSAuZmVlZGJhY2stYnRuOmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcbiAgYmFja2dyb3VuZDogcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjIpO1xufVxuXG4uY2hhdC1wYW5lbFtkYXRhLXRoZW1lPVwiZGFya1wiXSAuZmVlZGJhY2stYnRuLmFjdGl2ZSB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4zKTtcbn1cblxuLyogUHJpdmFjeSBOb3RpY2UgKi9cbi5wcml2YWN5LW5vdGljZSB7XG4gIHBhZGRpbmc6IDEycHggMTZweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBib3JkZXItdG9wOiAxcHggc29saWQgI2UwZTBlMDtcbn1cblxuLmNoYXQtcGFuZWxbZGF0YS10aGVtZT1cImRhcmtcIl0gLnByaXZhY3ktbm90aWNlIHtcbiAgYm9yZGVyLXRvcC1jb2xvcjogIzMzMztcbn1cblxuLnByaXZhY3ktbm90aWNlIHNtYWxsIHtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBjb2xvcjogIzk5OTtcbn1cblxuLyogTW9iaWxlIFJlc3BvbnNpdmUgKi9cbkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAuY2hhdC1wYW5lbCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvdHRvbTogMDtcbiAgICByaWdodDogMDtcbiAgICBib3JkZXItcmFkaXVzOiAwO1xuICB9XG5cbiAgLmNoYXQtYnV0dG9uIHtcbiAgICBib3R0b206IDE2cHg7XG4gICAgcmlnaHQ6IDE2cHg7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵlistener","ChatWidgetComponent_button_0_Template_button_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","toggleWidget","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵproperty","source_r4","url","ɵɵsanitizeUrl","ɵɵadvance","ɵɵtextInterpolate","title","ɵɵtemplate","ChatWidgetComponent_div_1_div_17_div_3_div_3_a_3_Template","ChatWidgetComponent_div_1_div_17_div_3_div_3_span_4_Template","type","ChatWidgetComponent_div_1_div_17_div_3_div_3_Template","message_r5","sources","ChatWidgetComponent_div_1_div_17_div_4_Template_button_click_1_listener","_r6","$implicit","giveFeedback","ChatWidgetComponent_div_1_div_17_div_4_Template_button_click_3_listener","ɵɵclassProp","feedbackGiven","ChatWidgetComponent_div_1_div_17_div_3_Template","ChatWidgetComponent_div_1_div_17_div_4_Template","role","ɵɵtextInterpolate1","content","length","id","ChatWidgetComponent_div_1_Template_button_click_8_listener","_r3","toggleTheme","ChatWidgetComponent_div_1__svg_svg_9_Template","ChatWidgetComponent_div_1__svg_svg_10_Template","ChatWidgetComponent_div_1_Template_button_click_11_listener","ChatWidgetComponent_div_1_div_16_Template","ChatWidgetComponent_div_1_div_17_Template","ChatWidgetComponent_div_1_div_18_Template","ɵɵtwoWayListener","ChatWidgetComponent_div_1_Template_textarea_ngModelChange_20_listener","$event","ɵɵtwoWayBindingSet","currentMessage","ChatWidgetComponent_div_1_Template_textarea_keypress_20_listener","handleKeyPress","ChatWidgetComponent_div_1_Template_button_click_21_listener","sendMessage","theme","messages","isLoading","ɵɵtwoWayProperty","trim","ChatWidgetComponent","constructor","chatService","isOpen","sessionId","ngOnInit","localStorage","getItem","loadConversationHistory","window","matchMedia","matches","getHistory","subscribe","next","history","console","log","map","msg","error","removeItem","userMessage","push","request","question","undefined","assistantMessage","sendMessageStreaming","streamEvent","token","JSON","stringify","metadata","setItem","handoffTriggered","messageId","complete","event","key","shiftKey","preventDefault","message","feedbackType","warn","submitFeedback","ɵɵdirectiveInject","i1","ChatService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ChatWidgetComponent_Template","rf","ctx","ChatWidgetComponent_button_0_Template","ChatWidgetComponent_div_1_Template","i2","NgForOf","NgIf","i3","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"sources":["C:\\Users\\bened\\IdeaProjects\\ChatQ-Assist\\chatq-assist-frontend\\src\\app\\components\\chat-widget\\chat-widget.component.ts","C:\\Users\\bened\\IdeaProjects\\ChatQ-Assist\\chatq-assist-frontend\\src\\app\\components\\chat-widget\\chat-widget.component.html"],"sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ChatService, ChatRequest, ChatResponse } from '../../services/chat.service';\nimport { WidgetConfig } from '../../models/widget-config.model';\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  sources?: any[];\n  id?: number; // Message ID for feedback\n  feedbackGiven?: 'POSITIVE' | 'NEGATIVE' | null;\n}\n\n@Component({\n  selector: 'app-chat-widget',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './chat-widget.component.html',\n  styleUrls: ['./chat-widget.component.css']\n})\nexport class ChatWidgetComponent implements OnInit {\n  isOpen = false;\n  messages: Message[] = [];\n  currentMessage = '';\n  sessionId: string | null = null;\n  isLoading = false;\n  theme: 'light' | 'dark' = 'light';\n\n  constructor(private chatService: ChatService) {}\n\n  ngOnInit() {\n    // Check for saved session\n    this.sessionId = localStorage.getItem('chatq-session-id');\n\n    // Load conversation history if session exists\n    if (this.sessionId) {\n      this.loadConversationHistory();\n    }\n\n    // Check system theme preference\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      this.theme = 'dark';\n    }\n  }\n\n  loadConversationHistory() {\n    if (!this.sessionId) return;\n\n    this.chatService.getHistory(this.sessionId).subscribe({\n      next: (history) => {\n        console.log('Loaded conversation history:', history);\n        this.messages = history.map(msg => ({\n          role: msg.role === 'USER' ? 'user' : 'assistant',\n          content: msg.content,\n          sources: [],\n          id: msg.id,\n          feedbackGiven: null\n        }));\n      },\n      error: (error) => {\n        console.error('Failed to load conversation history:', error);\n        // Clear invalid session\n        localStorage.removeItem('chatq-session-id');\n        this.sessionId = null;\n      }\n    });\n  }\n\n  toggleWidget() {\n    this.isOpen = !this.isOpen;\n  }\n\n  toggleTheme() {\n    this.theme = this.theme === 'light' ? 'dark' : 'light';\n  }\n\n  sendMessage() {\n    if (!this.currentMessage.trim() || this.isLoading) {\n      return;\n    }\n\n    const userMessage: Message = {\n      role: 'user',\n      content: this.currentMessage\n    };\n    this.messages.push(userMessage);\n\n    const request: ChatRequest = {\n      question: this.currentMessage,\n      sessionId: this.sessionId || undefined\n    };\n\n    this.currentMessage = '';\n    this.isLoading = true;\n\n    // Add placeholder for assistant response (will be filled with streaming tokens)\n    const assistantMessage: Message = {\n      role: 'assistant',\n      content: '',\n      sources: []\n    };\n    this.messages.push(assistantMessage);\n\n    // Use streaming API\n    this.chatService.sendMessageStreaming(request).subscribe({\n      next: (streamEvent) => {\n        if (streamEvent.type === 'token' && streamEvent.token) {\n          // Append token exactly as received from backend\n          console.log('Received token:', JSON.stringify(streamEvent.token));\n          assistantMessage.content += streamEvent.token;\n        } else if (streamEvent.type === 'metadata' && streamEvent.metadata) {\n          // Update session and metadata\n          this.sessionId = streamEvent.metadata.sessionId;\n          localStorage.setItem('chatq-session-id', streamEvent.metadata.sessionId);\n\n          if (streamEvent.metadata.sources) {\n            assistantMessage.sources = streamEvent.metadata.sources;\n          }\n\n          if (streamEvent.metadata.handoffTriggered) {\n            this.messages.push({\n              role: 'assistant',\n              content: 'Ich verbinde Sie mit einem Mitarbeiter.'\n            });\n          }\n        } else if (streamEvent.type === 'messageId' && streamEvent.messageId) {\n          // Store message ID for feedback\n          assistantMessage.id = streamEvent.messageId;\n          assistantMessage.feedbackGiven = null;\n        } else if (streamEvent.type === 'complete') {\n          this.isLoading = false;\n        } else if (streamEvent.type === 'error') {\n          console.error('Streaming error:', streamEvent.error);\n          assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n          this.isLoading = false;\n        }\n      },\n      error: (error) => {\n        console.error('Chat error:', error);\n        assistantMessage.content = 'Sorry, I encountered an error. Please try again.';\n        this.isLoading = false;\n      },\n      complete: () => {\n        this.isLoading = false;\n      }\n    });\n  }\n\n  handleKeyPress(event: KeyboardEvent) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n\n  giveFeedback(message: Message, feedbackType: 'POSITIVE' | 'NEGATIVE') {\n    if (!message.id) {\n      console.warn('Cannot give feedback: message has no ID');\n      return;\n    }\n\n    // Prevent duplicate feedback\n    if (message.feedbackGiven) {\n      console.log('Feedback already given for this message');\n      return;\n    }\n\n    this.chatService.submitFeedback({\n      messageId: message.id,\n      feedbackType: feedbackType\n    }).subscribe({\n      next: () => {\n        message.feedbackGiven = feedbackType;\n        console.log('Feedback submitted successfully:', feedbackType);\n      },\n      error: (error) => {\n        console.error('Failed to submit feedback:', error);\n      }\n    });\n  }\n}\n","<!-- Floating Chat Button -->\n<button\n  *ngIf=\"!isOpen\"\n  class=\"chat-button\"\n  [attr.data-theme]=\"theme\"\n  (click)=\"toggleWidget()\"\n  aria-label=\"Open chat\">\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n    <path d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"></path>\n  </svg>\n</button>\n\n<!-- Chat Panel -->\n<div *ngIf=\"isOpen\" class=\"chat-panel\" [attr.data-theme]=\"theme\">\n  <!-- Header -->\n  <div class=\"chat-header\">\n    <div class=\"header-content\">\n      <h3>ChatQ Assist</h3>\n      <p>How can we help you?</p>\n    </div>\n    <div class=\"header-actions\">\n      <button (click)=\"toggleTheme()\" class=\"icon-button\" aria-label=\"Toggle theme\">\n        <svg *ngIf=\"theme === 'light'\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\n        </svg>\n        <svg *ngIf=\"theme === 'dark'\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\n          <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\n          <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\n          <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\n          <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\n          <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n          <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\n          <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\n          <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\n        </svg>\n      </button>\n      <button (click)=\"toggleWidget()\" class=\"icon-button\" aria-label=\"Close chat\">\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Messages -->\n  <div class=\"chat-messages\">\n    <div *ngIf=\"messages.length === 0\" class=\"welcome-message\">\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <path d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"></path>\n      </svg>\n      <h4>Welcome to ChatQ Assist</h4>\n      <p>Ask us anything about our products and services.</p>\n    </div>\n\n    <div *ngFor=\"let message of messages\" class=\"message\" [class.user]=\"message.role === 'user'\">\n      <div class=\"message-content\">\n        {{ message.content }}\n      </div>\n      <div *ngIf=\"message.sources && message.sources.length > 0\" class=\"message-sources\">\n        <p class=\"sources-label\">Sources:</p>\n        <div *ngFor=\"let source of message.sources\" class=\"source-item\">\n          <span class=\"source-type\">{{ source.type }}</span>\n          <a *ngIf=\"source.url\" [href]=\"source.url\" target=\"_blank\">{{ source.title }}</a>\n          <span *ngIf=\"!source.url\">{{ source.title }}</span>\n        </div>\n      </div>\n      <!-- Feedback buttons for assistant messages -->\n      <div *ngIf=\"message.role === 'assistant' && message.id\" class=\"message-feedback\">\n        <button\n          class=\"feedback-btn\"\n          [class.active]=\"message.feedbackGiven === 'POSITIVE'\"\n          [disabled]=\"message.feedbackGiven !== null\"\n          (click)=\"giveFeedback(message, 'POSITIVE')\"\n          aria-label=\"Helpful\">\n          👍\n        </button>\n        <button\n          class=\"feedback-btn\"\n          [class.active]=\"message.feedbackGiven === 'NEGATIVE'\"\n          [disabled]=\"message.feedbackGiven !== null\"\n          (click)=\"giveFeedback(message, 'NEGATIVE')\"\n          aria-label=\"Not helpful\">\n          👎\n        </button>\n      </div>\n    </div>\n\n    <div *ngIf=\"isLoading\" class=\"message typing\">\n      <div class=\"typing-indicator\">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </div>\n  </div>\n\n  <!-- Input -->\n  <div class=\"chat-input\">\n    <textarea\n      [(ngModel)]=\"currentMessage\"\n      (keypress)=\"handleKeyPress($event)\"\n      placeholder=\"Type your message...\"\n      rows=\"1\"\n      [disabled]=\"isLoading\"></textarea>\n    <button\n      (click)=\"sendMessage()\"\n      [disabled]=\"!currentMessage.trim() || isLoading\"\n      aria-label=\"Send message\">\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n        <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n      </svg>\n    </button>\n  </div>\n\n  <!-- DSGVO Notice -->\n  <div class=\"privacy-notice\">\n    <small>Your privacy matters. We process data according to GDPR.</small>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}